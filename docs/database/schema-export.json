{
  "exported_at": "2026-01-16T20:14:49.878Z",
  "database_info": {
    "database_name": "postgres",
    "postgres_version": "PostgreSQL 17.6 on aarch64-unknown-linux-gnu, compiled by gcc (GCC) 13.2.0, 64-bit",
    "current_user": "postgres"
  },
  "tables": [
    {
      "schema": "public",
      "name": "Clientes WhatsApp_backup",
      "columns": [
        {
          "name": "telefone",
          "type": "numeric",
          "nullable": true,
          "default": "",
          "position": 1,
          "is_primary_key": false
        },
        {
          "name": "nome",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "ai_models_registry",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "provider",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "model_name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "gateway_identifier",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "capabilities",
          "type": "jsonb",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "context_window",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "max_output_tokens",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "input_price_per_million",
          "type": "numeric(10,6)",
          "nullable": false,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "output_price_per_million",
          "type": "numeric(10,6)",
          "nullable": false,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "cached_input_price_per_million",
          "type": "numeric(10,6)",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 14,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "audit_logs",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "user_email",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "user_role",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "action",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "resource_type",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "resource_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "endpoint",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "method",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "changes",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'success'::text",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "duration_ms",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 16,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "audit_logs_backup_poker_system",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "user_email",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "user_role",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "action",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "resource_type",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "resource_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "endpoint",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "method",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "changes",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'success'::text",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "duration_ms",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 16,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "bot_configurations",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "config_key",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "config_value",
          "type": "jsonb",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "is_default",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "category",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 9,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "client_budgets",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "budget_type",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "budget_limit",
          "type": "numeric",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "budget_period",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "current_usage",
          "type": "numeric",
          "nullable": true,
          "default": "0",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "usage_percentage",
          "type": "numeric(5,2)",
          "nullable": true,
          "default": "0",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "last_reset_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "next_reset_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "alert_threshold_80",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "alert_threshold_90",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "alert_threshold_100",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "alert_80_sent",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "alert_90_sent",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "alert_100_sent",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "pause_at_limit",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 16,
          "is_primary_key": false
        },
        {
          "name": "is_paused",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 17,
          "is_primary_key": false
        },
        {
          "name": "notification_email",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 18,
          "is_primary_key": false
        },
        {
          "name": "inherits_from_plan",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 19,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 20,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 21,
          "is_primary_key": false
        },
        {
          "name": "budget_mode",
          "type": "text",
          "nullable": true,
          "default": "'brl'::text",
          "position": 22,
          "is_primary_key": false
        },
        {
          "name": "token_limit",
          "type": "bigint",
          "nullable": true,
          "default": "0",
          "position": 23,
          "is_primary_key": false
        },
        {
          "name": "current_tokens",
          "type": "bigint",
          "nullable": true,
          "default": "0",
          "position": 24,
          "is_primary_key": false
        },
        {
          "name": "token_usage_percentage",
          "type": "numeric(5,2)",
          "nullable": true,
          "default": "0",
          "position": 25,
          "is_primary_key": false
        },
        {
          "name": "brl_limit",
          "type": "numeric(12,2)",
          "nullable": true,
          "default": "0",
          "position": 26,
          "is_primary_key": false
        },
        {
          "name": "current_brl",
          "type": "numeric(12,2)",
          "nullable": true,
          "default": "0",
          "position": 27,
          "is_primary_key": false
        },
        {
          "name": "brl_usage_percentage",
          "type": "numeric(5,2)",
          "nullable": true,
          "default": "0",
          "position": 28,
          "is_primary_key": false
        },
        {
          "name": "pause_reason",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 29,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "clientes_whatsapp",
      "columns": [
        {
          "name": "telefone",
          "type": "numeric",
          "nullable": false,
          "default": "",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "nome",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": true
        },
        {
          "name": "transferred_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "transferred_by",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "last_read_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "audio_preference",
          "type": "text",
          "nullable": true,
          "default": "'ask'::text",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "last_audio_response_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "clients",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "slug",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'active'::text",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "plan",
          "type": "text",
          "nullable": false,
          "default": "'free'::text",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "meta_access_token_secret_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "meta_verify_token_secret_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "meta_phone_number_id",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "meta_display_phone",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "openai_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "openai_model",
          "type": "text",
          "nullable": true,
          "default": "'gpt-4o'::text",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "groq_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "groq_model",
          "type": "text",
          "nullable": true,
          "default": "'llama-3.3-70b-versatile'::text",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "system_prompt",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "formatter_prompt",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "settings",
          "type": "jsonb",
          "nullable": true,
          "default": "'{\"enable_rag\": true, \"max_tokens\": 2000, \"temperature\": 0.7, \"enable_tools\": true, \"max_chat_history\": 15, \"enable_human_handoff\": true, \"message_split_enabled\": true, \"batching_delay_seconds\": 10}'::jsonb",
          "position": 16,
          "is_primary_key": false
        },
        {
          "name": "notification_email",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 17,
          "is_primary_key": false
        },
        {
          "name": "notification_webhook_url",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 18,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 19,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 20,
          "is_primary_key": false
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 21,
          "is_primary_key": false
        },
        {
          "name": "primary_model_provider",
          "type": "text",
          "nullable": false,
          "default": "'groq'::text",
          "position": 22,
          "is_primary_key": false
        },
        {
          "name": "meta_app_secret_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 23,
          "is_primary_key": false
        },
        {
          "name": "tts_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 24,
          "is_primary_key": false
        },
        {
          "name": "tts_provider",
          "type": "text",
          "nullable": true,
          "default": "'openai'::text",
          "position": 25,
          "is_primary_key": false
        },
        {
          "name": "tts_voice",
          "type": "text",
          "nullable": true,
          "default": "'alloy'::text",
          "position": 26,
          "is_primary_key": false
        },
        {
          "name": "tts_speed",
          "type": "numeric",
          "nullable": true,
          "default": "1.0",
          "position": 27,
          "is_primary_key": false
        },
        {
          "name": "tts_auto_offer",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 28,
          "is_primary_key": false
        },
        {
          "name": "tts_model",
          "type": "text",
          "nullable": true,
          "default": "'tts-1-hd'::text",
          "position": 29,
          "is_primary_key": false
        },
        {
          "name": "use_ai_gateway",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 30,
          "is_primary_key": false
        },
        {
          "name": "gateway_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 33,
          "is_primary_key": false
        },
        {
          "name": "gateway_key_name",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 34,
          "is_primary_key": false
        },
        {
          "name": "whatsapp_business_account_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 35,
          "is_primary_key": false
        },
        {
          "name": "ai_keys_mode",
          "type": "text",
          "nullable": false,
          "default": "'platform_only'::text",
          "position": 36,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "conversations",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "name",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": true,
          "default": "'bot'::text",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "assigned_to",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "last_message",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "last_update",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "last_read_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "documents",
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('documents_id_seq'::regclass)",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "content",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "embedding",
          "type": "vector(1536)",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "original_file_url",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "original_file_path",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "original_file_size",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "original_mime_type",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "execution_logs",
      "columns": [
        {
          "name": "id",
          "type": "bigint",
          "nullable": false,
          "default": "nextval('execution_logs_id_seq'::regclass)",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "execution_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "node_name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "input_data",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "output_data",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "error",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "duration_ms",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "flow_executions",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "flow_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "current_block_id",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "variables",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "history",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'active'::text",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "started_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "last_step_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "gateway_cache_performance",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "date",
          "type": "date",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "hour",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "total_requests",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "cache_hits",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "cache_misses",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "cache_hit_rate",
          "type": "numeric(5,2)",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "tokens_saved",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "cost_saved_usd",
          "type": "numeric(10,4)",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "cost_saved_brl",
          "type": "numeric(10,2)",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "avg_latency_cached_ms",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "avg_latency_uncached_ms",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "latency_improvement_pct",
          "type": "numeric(5,2)",
          "nullable": true,
          "default": "",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 16,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "gateway_usage_logs",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "conversation_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "request_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "model_registry_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "provider",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "model_name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "input_tokens",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "output_tokens",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "cached_tokens",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "total_tokens",
          "type": "integer",
          "nullable": false,
          "default": "0",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "latency_ms",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "was_cached",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "was_fallback",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "fallback_reason",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 16,
          "is_primary_key": false
        },
        {
          "name": "cost_usd",
          "type": "numeric(12,8)",
          "nullable": true,
          "default": "",
          "position": 17,
          "is_primary_key": false
        },
        {
          "name": "cost_brl",
          "type": "numeric(12,2)",
          "nullable": true,
          "default": "",
          "position": 18,
          "is_primary_key": false
        },
        {
          "name": "usd_to_brl_rate",
          "type": "numeric(8,4)",
          "nullable": true,
          "default": "",
          "position": 19,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "position": 20,
          "is_primary_key": false
        },
        {
          "name": "error_details",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 21,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 22,
          "is_primary_key": false
        },
        {
          "name": "api_type",
          "type": "text",
          "nullable": true,
          "default": "'chat'::text",
          "position": 23,
          "is_primary_key": false
        },
        {
          "name": "input_units",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 24,
          "is_primary_key": false
        },
        {
          "name": "output_units",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 25,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "interactive_flows",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "description",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "trigger_type",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "trigger_keywords",
          "type": "text[]",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "trigger_qr_code",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "blocks",
          "type": "jsonb",
          "nullable": false,
          "default": "'[]'::jsonb",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "edges",
          "type": "jsonb",
          "nullable": false,
          "default": "'[]'::jsonb",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "start_block_id",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 14,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "message_templates",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "created_by",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "meta_template_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "waba_id",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "category",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "language",
          "type": "text",
          "nullable": false,
          "default": "'pt_BR'::text",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "components",
          "type": "jsonb",
          "nullable": false,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'DRAFT'::text",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "rejection_reason",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 13,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "messages",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "conversation_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "name",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "content",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "type",
          "type": "text",
          "nullable": true,
          "default": "'text'::text",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "direction",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": true,
          "default": "'sent'::text",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "media_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "media_url",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 13,
          "is_primary_key": false
        },
        {
          "name": "media_type",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 14,
          "is_primary_key": false
        },
        {
          "name": "transcription",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 15,
          "is_primary_key": false
        },
        {
          "name": "audio_duration_seconds",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 16,
          "is_primary_key": false
        },
        {
          "name": "error_details",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 17,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "n8n_chat_histories",
      "columns": [
        {
          "name": "id",
          "type": "integer",
          "nullable": false,
          "default": "nextval('n8n_chat_histories_id_seq'::regclass)",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "session_id",
          "type": "character varying(255)",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "message",
          "type": "jsonb",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "(now() AT TIME ZONE 'utc -3'::text)",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "media_metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "last_read_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "wamid",
          "type": "character varying(255)",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "transcription",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "audio_duration_seconds",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": true,
          "default": "'pending'::text",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "error_details",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 13,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "plan_budgets",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "plan_name",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "budget_type",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "budget_limit",
          "type": "numeric",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "budget_period",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "alert_threshold_80",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "alert_threshold_90",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "alert_threshold_100",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "pause_at_limit",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "notification_email",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 12,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "pricing_config",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "provider",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "model",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "prompt_price",
          "type": "numeric(10,8)",
          "nullable": false,
          "default": "0",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "completion_price",
          "type": "numeric(10,8)",
          "nullable": false,
          "default": "0",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "unit",
          "type": "text",
          "nullable": true,
          "default": "'per_1k_tokens'::text",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "is_gateway_pricing",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "cached_input_price",
          "type": "numeric(12,6)",
          "nullable": true,
          "default": "",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "price_per_million_tokens",
          "type": "numeric(12,6)",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "currency",
          "type": "text",
          "nullable": true,
          "default": "'USD'::text",
          "position": 13,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "push_tokens",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "user_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "token",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "platform",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 6,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "shared_gateway_config",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "gateway_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "openai_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "groq_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "anthropic_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "google_api_key_secret_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "cache_enabled",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "cache_ttl_seconds",
          "type": "integer",
          "nullable": true,
          "default": "3600",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "default_fallback_chain",
          "type": "jsonb",
          "nullable": true,
          "default": "'[]'::jsonb",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "max_requests_per_minute",
          "type": "integer",
          "nullable": true,
          "default": "1000",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "max_tokens_per_minute",
          "type": "integer",
          "nullable": true,
          "default": "500000",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 13,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "tts_cache",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "text_hash",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "audio_url",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "media_id",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "provider",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "voice",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "duration_seconds",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "file_size_bytes",
          "type": "integer",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "(now() + '7 days'::interval)",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "hit_count",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 12,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "tts_usage_logs",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "event_type",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "text_length",
          "type": "integer",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "from_cache",
          "type": "boolean",
          "nullable": true,
          "default": "false",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "error_message",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 8,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "usage_logs",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "conversation_id",
          "type": "uuid",
          "nullable": true,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "source",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "model",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "prompt_tokens",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "completion_tokens",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "total_tokens",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "cost_usd",
          "type": "numeric(10,6)",
          "nullable": true,
          "default": "0",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "messages_sent",
          "type": "integer",
          "nullable": true,
          "default": "0",
          "position": 11,
          "is_primary_key": false
        },
        {
          "name": "metadata",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 12,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "now()",
          "position": 13,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "user_invites",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "invited_by_user_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "email",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "role",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "invite_token",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "status",
          "type": "text",
          "nullable": false,
          "default": "'pending'::text",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "(now() + '7 days'::interval)",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "accepted_at",
          "type": "timestamp with time zone",
          "nullable": true,
          "default": "",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 10,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 11,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "user_profiles",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "email",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "full_name",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "created_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 6,
          "is_primary_key": false
        },
        {
          "name": "role",
          "type": "text",
          "nullable": false,
          "default": "'user'::text",
          "position": 7,
          "is_primary_key": false
        },
        {
          "name": "permissions",
          "type": "jsonb",
          "nullable": true,
          "default": "'{}'::jsonb",
          "position": 8,
          "is_primary_key": false
        },
        {
          "name": "is_active",
          "type": "boolean",
          "nullable": true,
          "default": "true",
          "position": 9,
          "is_primary_key": false
        },
        {
          "name": "phone",
          "type": "text",
          "nullable": true,
          "default": "",
          "position": 10,
          "is_primary_key": false
        }
      ]
    },
    {
      "schema": "public",
      "name": "webhook_dedup",
      "columns": [
        {
          "name": "id",
          "type": "uuid",
          "nullable": false,
          "default": "gen_random_uuid()",
          "position": 1,
          "is_primary_key": true
        },
        {
          "name": "dedup_key",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 2,
          "is_primary_key": false
        },
        {
          "name": "client_id",
          "type": "uuid",
          "nullable": false,
          "default": "",
          "position": 3,
          "is_primary_key": false
        },
        {
          "name": "message_id",
          "type": "text",
          "nullable": false,
          "default": "",
          "position": 4,
          "is_primary_key": false
        },
        {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "nullable": false,
          "default": "now()",
          "position": 5,
          "is_primary_key": false
        },
        {
          "name": "webhook_payload",
          "type": "jsonb",
          "nullable": true,
          "default": "",
          "position": 6,
          "is_primary_key": false
        }
      ]
    }
  ],
  "rls_policies": [
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "policy_name": "Admins can manage models registry",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "policy_name": "Anyone can view active models",
      "using_expression": "(is_active = true)",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "policy_name": "Service role has full access to audit logs",
      "using_expression": "true",
      "with_check_expression": "true",
      "for_command": "ALL",
      "roles": [
        16482
      ]
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "policy_name": "Users can view own audit logs",
      "using_expression": "(user_id = auth.uid())",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "policy_name": "Users can view own client audit logs",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "policy_name": "Service role has full access to audit logs",
      "using_expression": "true",
      "with_check_expression": "true",
      "for_command": "ALL",
      "roles": [
        16482
      ]
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "policy_name": "Users can view own audit logs",
      "using_expression": "(user_id = auth.uid())",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "policy_name": "Users can view own client audit logs",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "policy_name": "Clients can delete their own configurations",
      "using_expression": "((client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid()))) AND (is_default = false))",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "policy_name": "Clients can insert their own configurations",
      "using_expression": null,
      "with_check_expression": "((client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid()))) AND (is_default = false))",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "policy_name": "Clients can update their own configurations",
      "using_expression": "((client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid()))) AND (is_default = false))",
      "with_check_expression": null,
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "policy_name": "Clients can view their own configurations and defaults",
      "using_expression": "((client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid()))) OR (is_default = true))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "policy_name": "Admins can manage all client budgets",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "policy_name": "Admins can view all client budgets",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "policy_name": "Clients can view own budget",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.client_id = client_budgets.client_id))))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "policy_name": "System can update client budgets",
      "using_expression": "true",
      "with_check_expression": null,
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "policy_name": "Service role can access all whatsapp contacts",
      "using_expression": "(auth.role() = 'service_role'::text)",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "policy_name": "Users can delete own client whatsapp contacts",
      "using_expression": "(client_id = user_client_id())",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "policy_name": "Users can insert own client whatsapp contacts",
      "using_expression": null,
      "with_check_expression": "(client_id = user_client_id())",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "policy_name": "Users can update own client whatsapp contacts",
      "using_expression": "(client_id = user_client_id())",
      "with_check_expression": "(client_id = user_client_id())",
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "policy_name": "Users can view own client whatsapp contacts",
      "using_expression": "(client_id = user_client_id())",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "policy_name": "realtime_select_clientes_whatsapp",
      "using_expression": "true",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481,
        16480
      ]
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "policy_name": "Service role can access all conversations",
      "using_expression": "(auth.role() = 'service_role'::text)",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "policy_name": "Service role can access all documents",
      "using_expression": "(auth.role() = 'service_role'::text)",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "policy_name": "Users can delete own client documents",
      "using_expression": "(((metadata ->> 'client_id'::text) = (user_client_id())::text) OR (client_id = user_client_id()))",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "policy_name": "Users can insert own client documents",
      "using_expression": null,
      "with_check_expression": "(((metadata ->> 'client_id'::text) = (user_client_id())::text) OR (client_id = user_client_id()))",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "policy_name": "Users can update own client documents",
      "using_expression": "(((metadata ->> 'client_id'::text) = (user_client_id())::text) OR (client_id = user_client_id()))",
      "with_check_expression": "(((metadata ->> 'client_id'::text) = (user_client_id())::text) OR (client_id = user_client_id()))",
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "policy_name": "Users can view own client documents",
      "using_expression": "(((metadata ->> 'client_id'::text) = (user_client_id())::text) OR (client_id = user_client_id()))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "policy_name": "Service role can insert execution logs",
      "using_expression": null,
      "with_check_expression": "true",
      "for_command": "INSERT",
      "roles": [
        16482
      ]
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "policy_name": "Service role can view all execution logs",
      "using_expression": "true",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16482
      ]
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "policy_name": "Users can view own client execution logs",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "policy_name": "Service role can manage all executions",
      "using_expression": "true",
      "with_check_expression": "true",
      "for_command": "ALL",
      "roles": [
        16482
      ]
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "policy_name": "Users can view their client's executions",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "policy_name": "Admins can view all cache performance",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "policy_name": "Clients can view own cache performance",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.client_id = gateway_cache_performance.client_id))))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "policy_name": "System can manage cache performance",
      "using_expression": null,
      "with_check_expression": "true",
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "policy_name": "Admins can view all usage logs",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "policy_name": "Clients can view own usage logs",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.client_id = gateway_usage_logs.client_id))))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "policy_name": "System can insert usage logs",
      "using_expression": null,
      "with_check_expression": "true",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "policy_name": "Users can create flows for their client",
      "using_expression": null,
      "with_check_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "policy_name": "Users can delete their client's flows",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "policy_name": "Users can update their client's flows",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "policy_name": "Users can view their client's flows",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "policy_name": "Client admins can create templates",
      "using_expression": null,
      "with_check_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = ANY (ARRAY['admin'::text, 'client_admin'::text])))))",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "policy_name": "Client admins can delete draft templates",
      "using_expression": "((status = 'DRAFT'::text) AND (client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = ANY (ARRAY['admin'::text, 'client_admin'::text]))))))",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "policy_name": "Client admins can update templates",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = ANY (ARRAY['admin'::text, 'client_admin'::text])))))",
      "with_check_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = ANY (ARRAY['admin'::text, 'client_admin'::text])))))",
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "policy_name": "Users can view own client templates",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "policy_name": "Service role can access all messages",
      "using_expression": "(auth.role() = 'service_role'::text)",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "policy_name": "Users can view own client messages",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "policy_name": "realtime_select_n8n_chat_histories",
      "using_expression": "true",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481,
        16480
      ]
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "policy_name": "Admins can manage plan budgets",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "policy_name": "Anyone can view plan budgets",
      "using_expression": "true",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "policy_name": "Users can delete own client pricing config",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "policy_name": "Users can insert own client pricing config",
      "using_expression": null,
      "with_check_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "policy_name": "Users can update own client pricing config",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "policy_name": "Users can view own client pricing config",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "policy_name": "Users can insert own tokens",
      "using_expression": null,
      "with_check_expression": "(auth.uid() = user_id)",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "policy_name": "Users can read own tokens",
      "using_expression": "(auth.uid() = user_id)",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "policy_name": "Users can update own tokens",
      "using_expression": "(auth.uid() = user_id)",
      "with_check_expression": null,
      "for_command": "UPDATE",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "policy_name": "Admins can manage shared gateway config",
      "using_expression": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND (user_profiles.role = 'admin'::text))))",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "policy_name": "Anyone authenticated can view shared config",
      "using_expression": "(auth.role() = 'authenticated'::text)",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "policy_name": "Service role can access all TTS cache",
      "using_expression": "(auth.role() = 'service_role'::text)",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "policy_name": "Service role can insert TTS usage logs",
      "using_expression": null,
      "with_check_expression": "(auth.role() = 'service_role'::text)",
      "for_command": "INSERT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "policy_name": "Users can view own client TTS usage logs",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "policy_name": "Service role can access all usage logs",
      "using_expression": "(auth.role() = 'service_role'::text)",
      "with_check_expression": null,
      "for_command": "ALL",
      "roles": [
        0
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "policy_name": "Client admins can create invites",
      "using_expression": null,
      "with_check_expression": "((client_id = get_current_user_client_id()) AND user_is_admin())",
      "for_command": "INSERT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "policy_name": "Client admins can delete invites",
      "using_expression": "((client_id = get_current_user_client_id()) AND user_is_admin())",
      "with_check_expression": null,
      "for_command": "DELETE",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "policy_name": "Client admins can update invites",
      "using_expression": "((client_id = get_current_user_client_id()) AND user_is_admin())",
      "with_check_expression": null,
      "for_command": "UPDATE",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "policy_name": "Client admins can view invites",
      "using_expression": "((client_id = get_current_user_client_id()) AND user_is_admin())",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "policy_name": "Users can view own invite by email",
      "using_expression": "(email = (( SELECT users.email\n   FROM auth.users\n  WHERE (users.id = auth.uid())))::text)",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481,
        16480
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Client admins can create users",
      "using_expression": null,
      "with_check_expression": "((client_id = get_current_user_client_id()) AND user_is_admin() AND (role <> 'admin'::text))",
      "for_command": "INSERT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Client admins can deactivate users",
      "using_expression": "((client_id = get_current_user_client_id()) AND user_is_admin() AND (id <> auth.uid()))",
      "with_check_expression": null,
      "for_command": "UPDATE",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Client admins can update team members",
      "using_expression": "((client_id = get_current_user_client_id()) AND user_is_admin() AND (id <> auth.uid()))",
      "with_check_expression": "((client_id = get_current_user_client_id()) AND (role <> 'admin'::text))",
      "for_command": "UPDATE",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Client admins can view team members",
      "using_expression": "((client_id = get_current_user_client_id()) AND user_is_admin())",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Super admins have full access",
      "using_expression": "user_has_role('admin'::text)",
      "with_check_expression": "user_has_role('admin'::text)",
      "for_command": "ALL",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Users can update own profile",
      "using_expression": "(id = auth.uid())",
      "with_check_expression": "((id = auth.uid()) AND (role = ( SELECT user_profiles_1.role\n   FROM user_profiles user_profiles_1\n  WHERE (user_profiles_1.id = auth.uid()))))",
      "for_command": "UPDATE",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "policy_name": "Users can view own profile",
      "using_expression": "(id = auth.uid())",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "policy_name": "Service role has full access to webhook_dedup",
      "using_expression": "true",
      "with_check_expression": "true",
      "for_command": "ALL",
      "roles": [
        16482
      ]
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "policy_name": "Users can view own client dedup records",
      "using_expression": "(client_id IN ( SELECT user_profiles.client_id\n   FROM user_profiles\n  WHERE (user_profiles.id = auth.uid())))",
      "with_check_expression": null,
      "for_command": "SELECT",
      "roles": [
        16481
      ]
    }
  ],
  "triggers": [
    {
      "table_schema": "public",
      "table_name": "Clientes WhatsApp",
      "trigger_name": "clientes_whatsapp_view_insert_trigger",
      "trigger_definition": "CREATE TRIGGER clientes_whatsapp_view_insert_trigger INSTEAD OF INSERT ON \"Clientes WhatsApp\" FOR EACH ROW EXECUTE FUNCTION clientes_whatsapp_view_insert()",
      "function_name": "clientes_whatsapp_view_insert"
    },
    {
      "table_schema": "public",
      "table_name": "Clientes WhatsApp",
      "trigger_name": "clientes_whatsapp_view_update_trigger",
      "trigger_definition": "CREATE TRIGGER clientes_whatsapp_view_update_trigger INSTEAD OF UPDATE ON \"Clientes WhatsApp\" FOR EACH ROW EXECUTE FUNCTION clientes_whatsapp_view_update()",
      "function_name": "clientes_whatsapp_view_update"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "trigger_name": "ai_models_registry_updated_at",
      "trigger_definition": "CREATE TRIGGER ai_models_registry_updated_at BEFORE UPDATE ON ai_models_registry FOR EACH ROW EXECUTE FUNCTION update_gateway_configurations_updated_at()",
      "function_name": "update_gateway_configurations_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "trigger_name": "trigger_update_bot_configurations_updated_at",
      "trigger_definition": "CREATE TRIGGER trigger_update_bot_configurations_updated_at BEFORE UPDATE ON bot_configurations FOR EACH ROW EXECUTE FUNCTION update_bot_configurations_updated_at()",
      "function_name": "update_bot_configurations_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "trigger_name": "client_budgets_calculate_modular_percentages",
      "trigger_definition": "CREATE TRIGGER client_budgets_calculate_modular_percentages BEFORE INSERT OR UPDATE OF current_tokens, token_limit, current_brl, brl_limit ON client_budgets FOR EACH ROW EXECUTE FUNCTION calculate_modular_budget_percentages()",
      "function_name": "calculate_modular_budget_percentages"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "trigger_name": "client_budgets_calculate_next_reset",
      "trigger_definition": "CREATE TRIGGER client_budgets_calculate_next_reset BEFORE INSERT OR UPDATE OF budget_period, last_reset_at ON client_budgets FOR EACH ROW EXECUTE FUNCTION calculate_next_reset()",
      "function_name": "calculate_next_reset"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "trigger_name": "client_budgets_updated_at",
      "trigger_definition": "CREATE TRIGGER client_budgets_updated_at BEFORE UPDATE ON client_budgets FOR EACH ROW EXECUTE FUNCTION update_plan_budgets_updated_at()",
      "function_name": "update_plan_budgets_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "trigger_name": "broadcast_conversation_trigger",
      "trigger_definition": "CREATE TRIGGER broadcast_conversation_trigger AFTER INSERT OR DELETE OR UPDATE ON clientes_whatsapp FOR EACH ROW EXECUTE FUNCTION broadcast_conversation_change()",
      "function_name": "broadcast_conversation_change"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "trigger_name": "trigger_update_clientes_whatsapp_updated_at",
      "trigger_definition": "CREATE TRIGGER trigger_update_clientes_whatsapp_updated_at BEFORE UPDATE ON clientes_whatsapp FOR EACH ROW EXECUTE FUNCTION update_clientes_whatsapp_updated_at()",
      "function_name": "update_clientes_whatsapp_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "trigger_name": "update_clients_updated_at",
      "trigger_definition": "CREATE TRIGGER update_clients_updated_at BEFORE UPDATE ON clients FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()",
      "function_name": "update_updated_at_column"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "trigger_name": "gateway_cache_performance_updated_at",
      "trigger_definition": "CREATE TRIGGER gateway_cache_performance_updated_at BEFORE UPDATE ON gateway_cache_performance FOR EACH ROW EXECUTE FUNCTION update_gateway_configurations_updated_at()",
      "function_name": "update_gateway_configurations_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "trigger_name": "update_interactive_flows_updated_at_trigger",
      "trigger_definition": "CREATE TRIGGER update_interactive_flows_updated_at_trigger BEFORE UPDATE ON interactive_flows FOR EACH ROW EXECUTE FUNCTION update_interactive_flows_updated_at()",
      "function_name": "update_interactive_flows_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "trigger_name": "update_templates_updated_at",
      "trigger_definition": "CREATE TRIGGER update_templates_updated_at BEFORE UPDATE ON message_templates FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()",
      "function_name": "update_updated_at_column"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "trigger_name": "broadcast_message_trigger",
      "trigger_definition": "CREATE TRIGGER broadcast_message_trigger AFTER INSERT OR DELETE OR UPDATE ON n8n_chat_histories FOR EACH ROW EXECUTE FUNCTION broadcast_message_change()",
      "function_name": "broadcast_message_change"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "trigger_name": "plan_budgets_updated_at",
      "trigger_definition": "CREATE TRIGGER plan_budgets_updated_at BEFORE UPDATE ON plan_budgets FOR EACH ROW EXECUTE FUNCTION update_plan_budgets_updated_at()",
      "function_name": "update_plan_budgets_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "trigger_name": "pricing_config_updated_at",
      "trigger_definition": "CREATE TRIGGER pricing_config_updated_at BEFORE UPDATE ON pricing_config FOR EACH ROW EXECUTE FUNCTION update_pricing_config_timestamp()",
      "function_name": "update_pricing_config_timestamp"
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "trigger_name": "shared_gateway_config_updated_at",
      "trigger_definition": "CREATE TRIGGER shared_gateway_config_updated_at BEFORE UPDATE ON shared_gateway_config FOR EACH ROW EXECUTE FUNCTION update_shared_gateway_config_updated_at()",
      "function_name": "update_shared_gateway_config_updated_at"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "trigger_name": "update_user_invites_updated_at",
      "trigger_definition": "CREATE TRIGGER update_user_invites_updated_at BEFORE UPDATE ON user_invites FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()",
      "function_name": "update_updated_at_column"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "trigger_name": "update_user_profiles_updated_at",
      "trigger_definition": "CREATE TRIGGER update_user_profiles_updated_at BEFORE UPDATE ON user_profiles FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()",
      "function_name": "update_updated_at_column"
    }
  ],
  "functions": [
    {
      "function_schema": "public",
      "function_name": "array_to_halfvec",
      "arguments": "numeric[], integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(numeric[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_halfvec",
      "arguments": "integer[], integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(integer[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_halfvec",
      "arguments": "real[], integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(real[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_halfvec",
      "arguments": "double precision[], integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(double precision[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_sparsevec",
      "arguments": "real[], integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(real[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_sparsevec",
      "arguments": "double precision[], integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(double precision[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_sparsevec",
      "arguments": "numeric[], integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(numeric[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_sparsevec",
      "arguments": "integer[], integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(integer[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_vector",
      "arguments": "numeric[], integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(numeric[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_vector",
      "arguments": "real[], integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(real[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_vector",
      "arguments": "double precision[], integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(double precision[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "array_to_vector",
      "arguments": "integer[], integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(integer[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "auto_expire_invites",
      "arguments": "",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.auto_expire_invites()\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  UPDATE public.user_invites\r\n  SET status = 'expired'\r\n  WHERE status = 'pending'\r\n  AND expires_at < NOW();\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "backfill_operation_type",
      "arguments": "",
      "return_type": "TABLE(updated_count integer)",
      "definition": "CREATE OR REPLACE FUNCTION public.backfill_operation_type()\n RETURNS TABLE(updated_count integer)\n LANGUAGE plpgsql\nAS $function$\r\nDECLARE\r\n  v_count INTEGER := 0;\r\nBEGIN\r\n  -- 1. Whisper  transcription\r\n  UPDATE usage_logs\r\n  SET metadata = COALESCE(metadata, '{}'::JSONB) || '{\"operation_type\": \"transcription\"}'::JSONB\r\n  WHERE source = 'whisper'\r\n    AND (metadata->>'operation_type' IS NULL OR metadata IS NULL);\r\n\r\n  GET DIAGNOSTICS v_count = ROW_COUNT;\r\n\r\n  -- 2. Groq  chat\r\n  UPDATE usage_logs\r\n  SET metadata = COALESCE(metadata, '{}'::JSONB) || '{\"operation_type\": \"chat\"}'::JSONB\r\n  WHERE source = 'groq'\r\n    AND (metadata->>'operation_type' IS NULL OR metadata IS NULL);\r\n\r\n  -- GET DIAGNOSTICS v_count = v_count + ROW_COUNT;\r\n\r\n  -- 3. OpenAI text-embedding  embedding\r\n  UPDATE usage_logs\r\n  SET metadata = COALESCE(metadata, '{}'::JSONB) || '{\"operation_type\": \"embedding\"}'::JSONB\r\n  WHERE source = 'openai'\r\n    AND model LIKE 'text-embedding%'\r\n    AND (metadata->>'operation_type' IS NULL OR metadata IS NULL);\r\n\r\n  -- GET DIAGNOSTICS v_count = v_count + ROW_COUNT;\r\n\r\n  -- 4. OpenAI gpt-4o sem conversation_id  vision ou pdf_summary\r\n  -- (No podemos diferenciar automaticamente, deixar como 'unknown')\r\n  UPDATE usage_logs\r\n  SET metadata = COALESCE(metadata, '{}'::JSONB) || '{\"operation_type\": \"unknown\"}'::JSONB\r\n  WHERE source = 'openai'\r\n    AND model LIKE 'gpt-4%'\r\n    AND conversation_id IS NULL\r\n    AND (metadata->>'operation_type' IS NULL OR metadata IS NULL);\r\n\r\n  -- GET DIAGNOSTICS v_count = v_count + ROW_COUNT;\r\n\r\n  -- 5. OpenAI gpt-4o com conversation_id  chat\r\n  UPDATE usage_logs\r\n  SET metadata = COALESCE(metadata, '{}'::JSONB) || '{\"operation_type\": \"chat\"}'::JSONB\r\n  WHERE source = 'openai'\r\n    AND model LIKE 'gpt-4%'\r\n    AND conversation_id IS NOT NULL\r\n    AND (metadata->>'operation_type' IS NULL OR metadata IS NULL);\r\n\r\n  -- GET DIAGNOSTICS v_count = v_count + ROW_COUNT;\r\n\r\n  RETURN QUERY SELECT v_count;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "binary_quantize",
      "arguments": "vector",
      "return_type": "bit",
      "definition": "CREATE OR REPLACE FUNCTION public.binary_quantize(vector)\n RETURNS bit\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$binary_quantize$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "binary_quantize",
      "arguments": "halfvec",
      "return_type": "bit",
      "definition": "CREATE OR REPLACE FUNCTION public.binary_quantize(halfvec)\n RETURNS bit\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_binary_quantize$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "broadcast_conversation_change",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.broadcast_conversation_change()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\r\nDECLARE\r\n  channel_name TEXT;\r\nBEGIN\r\n  -- Build channel name: 'conversations:{client_id}'\r\n  channel_name := 'conversations:' || COALESCE(NEW.client_id::TEXT, OLD.client_id::TEXT);\r\n\r\n  -- Broadcast to Realtime channel\r\n  PERFORM realtime.broadcast_changes(\r\n    channel_name,\r\n    TG_OP,\r\n    TG_OP,\r\n    TG_TABLE_NAME,\r\n    TG_TABLE_SCHEMA,\r\n    NEW,\r\n    OLD\r\n  );\r\n\r\n  RETURN COALESCE(NEW, OLD);\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "broadcast_message_change",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.broadcast_message_change()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\r\nDECLARE\r\n  channel_name TEXT;\r\nBEGIN\r\n  -- Build channel name: 'messages:{client_id}:{phone}'\r\n  channel_name := 'messages:' || COALESCE(NEW.client_id::TEXT, OLD.client_id::TEXT) ||\r\n                  ':' || COALESCE(NEW.session_id::TEXT, OLD.session_id::TEXT);\r\n\r\n  -- Broadcast to Realtime channel\r\n  PERFORM realtime.broadcast_changes(\r\n    channel_name,\r\n    TG_OP,\r\n    TG_OP,\r\n    TG_TABLE_NAME,\r\n    TG_TABLE_SCHEMA,\r\n    NEW,\r\n    OLD\r\n  );\r\n\r\n  RETURN COALESCE(NEW, OLD);\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "calculate_budget_usage_percentage",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.calculate_budget_usage_percentage()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  IF NEW.budget_limit > 0 THEN\r\n    NEW.usage_percentage = ROUND((NEW.current_usage / NEW.budget_limit) * 100, 2);\r\n  ELSE\r\n    NEW.usage_percentage = 0;\r\n  END IF;\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "calculate_modular_budget_percentages",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.calculate_modular_budget_percentages()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  -- Calculate token percentage\r\n  IF NEW.token_limit > 0 THEN\r\n    NEW.token_usage_percentage = ROUND((NEW.current_tokens::NUMERIC / NEW.token_limit::NUMERIC) * 100, 2);\r\n  ELSE\r\n    NEW.token_usage_percentage = 0;\r\n  END IF;\r\n\r\n  -- Calculate BRL percentage\r\n  IF NEW.brl_limit > 0 THEN\r\n    NEW.brl_usage_percentage = ROUND((NEW.current_brl / NEW.brl_limit) * 100, 2);\r\n  ELSE\r\n    NEW.brl_usage_percentage = 0;\r\n  END IF;\r\n\r\n  -- For backward compatibility, set usage_percentage to the highest\r\n  NEW.usage_percentage = GREATEST(NEW.token_usage_percentage, NEW.brl_usage_percentage);\r\n\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "calculate_next_reset",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.calculate_next_reset()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  CASE NEW.budget_period\r\n    WHEN 'daily' THEN\r\n      NEW.next_reset_at = (NEW.last_reset_at + INTERVAL '1 day');\r\n    WHEN 'weekly' THEN\r\n      NEW.next_reset_at = (NEW.last_reset_at + INTERVAL '1 week');\r\n    WHEN 'monthly' THEN\r\n      NEW.next_reset_at = (NEW.last_reset_at + INTERVAL '1 month');\r\n  END CASE;\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "check_budget_available",
      "arguments": "p_client_id uuid",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.check_budget_available(p_client_id uuid)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  v_budget client_budgets%ROWTYPE;\r\nBEGIN\r\n  SELECT * INTO v_budget\r\n  FROM client_budgets\r\n  WHERE client_id = p_client_id;\r\n\r\n  IF NOT FOUND THEN\r\n    -- No budget configured = unlimited\r\n    RETURN true;\r\n  END IF;\r\n\r\n  -- If already paused, deny\r\n  IF v_budget.is_paused THEN\r\n    RETURN false;\r\n  END IF;\r\n\r\n  -- Check based on mode\r\n  CASE v_budget.budget_mode\r\n    WHEN 'tokens' THEN\r\n      -- Check token limit\r\n      IF v_budget.token_limit > 0 AND v_budget.current_tokens >= v_budget.token_limit THEN\r\n        RETURN false;\r\n      END IF;\r\n\r\n    WHEN 'brl' THEN\r\n      -- Check BRL limit\r\n      IF v_budget.brl_limit > 0 AND v_budget.current_brl >= v_budget.brl_limit THEN\r\n        RETURN false;\r\n      END IF;\r\n\r\n    WHEN 'both' THEN\r\n      -- Check BOTH (deny if ANY limit reached)\r\n      IF (v_budget.token_limit > 0 AND v_budget.current_tokens >= v_budget.token_limit) OR\r\n         (v_budget.brl_limit > 0 AND v_budget.current_brl >= v_budget.brl_limit) THEN\r\n        RETURN false;\r\n      END IF;\r\n  END CASE;\r\n\r\n  RETURN true;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "cleanup_old_audit_logs",
      "arguments": "retention_days integer DEFAULT 90",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.cleanup_old_audit_logs(retention_days integer DEFAULT 90)\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  deleted_count INTEGER;\r\nBEGIN\r\n  DELETE FROM public.audit_logs\r\n  WHERE created_at < (now() - make_interval(days => retention_days));\r\n\r\n  GET DIAGNOSTICS deleted_count = ROW_COUNT;\r\n\r\n  RETURN deleted_count;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "cleanup_old_execution_logs",
      "arguments": "retention_days integer DEFAULT 30",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.cleanup_old_execution_logs(retention_days integer DEFAULT 30)\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  deleted_count INTEGER;\r\nBEGIN\r\n  DELETE FROM public.execution_logs\r\n  WHERE timestamp < (now() - make_interval(days => retention_days));\r\n\r\n  GET DIAGNOSTICS deleted_count = ROW_COUNT;\r\n  RETURN deleted_count;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "cleanup_old_webhook_dedup",
      "arguments": "retention_hours integer DEFAULT 24",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.cleanup_old_webhook_dedup(retention_hours integer DEFAULT 24)\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  deleted_count INTEGER;\r\nBEGIN\r\n  DELETE FROM public.webhook_dedup\r\n  WHERE processed_at < (now() - make_interval(hours => retention_hours));\r\n  \r\n  GET DIAGNOSTICS deleted_count = ROW_COUNT;\r\n  \r\n  RETURN deleted_count;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "clientes_whatsapp_view_insert",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.clientes_whatsapp_view_insert()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  INSERT INTO clientes_whatsapp (telefone, nome, status, created_at)\r\n  VALUES (NEW.telefone, NEW.nome, NEW.status, COALESCE(NEW.created_at, NOW()))\r\n  ON CONFLICT (telefone)\r\n  DO UPDATE SET\r\n    nome = COALESCE(EXCLUDED.nome, clientes_whatsapp.nome),\r\n    status = COALESCE(EXCLUDED.status, clientes_whatsapp.status);\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "clientes_whatsapp_view_update",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.clientes_whatsapp_view_update()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  UPDATE clientes_whatsapp\r\n  SET\r\n    telefone = NEW.telefone,\r\n    nome = NEW.nome,\r\n    status = NEW.status,\r\n    created_at = NEW.created_at\r\n  WHERE telefone = OLD.telefone;\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "cosine_distance",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.cosine_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_cosine_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "cosine_distance",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.cosine_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$cosine_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "cosine_distance",
      "arguments": "sparsevec, sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.cosine_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_cosine_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "create_client_secret",
      "arguments": "secret_value text, secret_name text, secret_description text DEFAULT NULL::text",
      "return_type": "uuid",
      "definition": "CREATE OR REPLACE FUNCTION public.create_client_secret(secret_value text, secret_name text, secret_description text DEFAULT NULL::text)\n RETURNS uuid\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  secret_id UUID;\r\nBEGIN\r\n  -- Criar secret usando a funo nativa do Supabase Vault\r\n  SELECT vault.create_secret(secret_value, secret_name, secret_description) INTO secret_id;\r\n\r\n  RETURN secret_id;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "create_vault_secret",
      "arguments": "p_secret text, p_name text, p_description text DEFAULT NULL::text",
      "return_type": "uuid",
      "definition": "CREATE OR REPLACE FUNCTION public.create_vault_secret(p_secret text, p_name text, p_description text DEFAULT NULL::text)\n RETURNS uuid\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\r\nDECLARE\r\n  v_secret_id UUID;\r\nBEGIN\r\n  -- Check if secret with this name already exists\r\n  SELECT id INTO v_secret_id\r\n  FROM vault.secrets\r\n  WHERE name = p_name\r\n  LIMIT 1;\r\n\r\n  IF v_secret_id IS NOT NULL THEN\r\n    -- Secret exists, return existing ID\r\n    -- Note: Vault secrets are immutable, so we don't update\r\n    RAISE NOTICE 'Secret \"%\" already exists with ID %', p_name, v_secret_id;\r\n    RETURN v_secret_id;\r\n  END IF;\r\n\r\n  -- Create new secret\r\n  SELECT vault.create_secret(\r\n    p_secret,\r\n    p_name,\r\n    p_description\r\n  ) INTO v_secret_id;\r\n\r\n  RETURN v_secret_id;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "delete_client_secret",
      "arguments": "secret_id uuid",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.delete_client_secret(secret_id uuid)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  -- Delete secret from vault\r\n  DELETE FROM vault.secrets WHERE id = secret_id;\r\n\r\n  -- Check if deletion was successful\r\n  IF NOT FOUND THEN\r\n    RAISE NOTICE 'Secret % not found or already deleted', secret_id;\r\n    RETURN FALSE;\r\n  END IF;\r\n\r\n  RETURN TRUE;\r\nEXCEPTION\r\n  WHEN OTHERS THEN\r\n    RAISE NOTICE 'Error deleting secret %: %', secret_id, SQLERRM;\r\n    RETURN FALSE;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_client_secret",
      "arguments": "secret_id uuid",
      "return_type": "text",
      "definition": "CREATE OR REPLACE FUNCTION public.get_client_secret(secret_id uuid)\n RETURNS text\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  secret_value TEXT;\r\nBEGIN\r\n  SELECT decrypted_secret INTO secret_value\r\n  FROM vault.decrypted_secrets\r\n  WHERE id = secret_id;\r\n\r\n  RETURN secret_value;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_conversation_summary",
      "arguments": "p_client_id uuid, p_limit integer DEFAULT 50",
      "return_type": "TABLE(conversation_id uuid, phone text, name text, status text, last_message text, last_update timestamp with time zone, message_count bigint)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_conversation_summary(p_client_id uuid, p_limit integer DEFAULT 50)\n RETURNS TABLE(conversation_id uuid, phone text, name text, status text, last_message text, last_update timestamp with time zone, message_count bigint)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    c.id,\r\n    c.phone,\r\n    c.name,\r\n    c.status,\r\n    c.last_message,\r\n    c.last_update,\r\n    COUNT(m.id) as message_count\r\n  FROM conversations c\r\n  LEFT JOIN messages m ON m.conversation_id = c.id\r\n  WHERE c.client_id = p_client_id\r\n  GROUP BY c.id, c.phone, c.name, c.status, c.last_message, c.last_update\r\n  ORDER BY c.last_update DESC\r\n  LIMIT p_limit;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_current_user_client_id",
      "arguments": "",
      "return_type": "uuid",
      "definition": "CREATE OR REPLACE FUNCTION public.get_current_user_client_id()\n RETURNS uuid\n LANGUAGE sql\n SECURITY DEFINER\nAS $function$\r\n  SELECT client_id FROM public.user_profiles WHERE id = auth.uid();\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_current_user_role",
      "arguments": "",
      "return_type": "text",
      "definition": "CREATE OR REPLACE FUNCTION public.get_current_user_role()\n RETURNS text\n LANGUAGE sql\n SECURITY DEFINER\nAS $function$\r\n  SELECT role FROM public.user_profiles WHERE id = auth.uid();\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_daily_usage",
      "arguments": "p_client_id uuid, p_days integer DEFAULT 30",
      "return_type": "TABLE(date date, source text, total_tokens bigint, total_cost numeric, request_count bigint)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_daily_usage(p_client_id uuid, p_days integer DEFAULT 30)\n RETURNS TABLE(date date, source text, total_tokens bigint, total_cost numeric, request_count bigint)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    DATE(ul.created_at) as date,\r\n    ul.source,\r\n    SUM(ul.total_tokens)::BIGINT as total_tokens,\r\n    SUM(ul.cost_usd)::NUMERIC as total_cost,\r\n    COUNT(*)::BIGINT as request_count\r\n  FROM usage_logs ul\r\n  WHERE ul.client_id = p_client_id\r\n    AND ul.created_at >= NOW() - (p_days || ' days')::INTERVAL\r\n  GROUP BY DATE(ul.created_at), ul.source\r\n  ORDER BY date DESC, source;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_model_pricing",
      "arguments": "p_client_id uuid, p_provider text, p_model text",
      "return_type": "TABLE(prompt_price numeric, completion_price numeric, unit text)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_model_pricing(p_client_id uuid, p_provider text, p_model text)\n RETURNS TABLE(prompt_price numeric, completion_price numeric, unit text)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    pc.prompt_price,\r\n    pc.completion_price,\r\n    pc.unit\r\n  FROM pricing_config pc\r\n  WHERE pc.client_id = p_client_id\r\n    AND pc.provider = p_provider\r\n    AND pc.model = p_model\r\n  LIMIT 1;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_monthly_summary",
      "arguments": "p_client_id uuid, p_year integer DEFAULT (EXTRACT(year FROM now()))::integer, p_month integer DEFAULT (EXTRACT(month FROM now()))::integer",
      "return_type": "TABLE(source text, model text, total_tokens bigint, prompt_tokens bigint, completion_tokens bigint, total_cost numeric, request_count bigint)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_monthly_summary(p_client_id uuid, p_year integer DEFAULT (EXTRACT(year FROM now()))::integer, p_month integer DEFAULT (EXTRACT(month FROM now()))::integer)\n RETURNS TABLE(source text, model text, total_tokens bigint, prompt_tokens bigint, completion_tokens bigint, total_cost numeric, request_count bigint)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    ul.source,\r\n    COALESCE(ul.model, 'unknown') as model,\r\n    SUM(ul.total_tokens)::BIGINT as total_tokens,\r\n    SUM(ul.prompt_tokens)::BIGINT as prompt_tokens,\r\n    SUM(ul.completion_tokens)::BIGINT as completion_tokens,\r\n    SUM(ul.cost_usd)::NUMERIC as total_cost,\r\n    COUNT(*)::BIGINT as request_count\r\n  FROM usage_logs ul\r\n  WHERE ul.client_id = p_client_id\r\n    AND EXTRACT(YEAR FROM ul.created_at) = p_year\r\n    AND EXTRACT(MONTH FROM ul.created_at) = p_month\r\n  GROUP BY ul.source, ul.model\r\n  ORDER BY total_tokens DESC;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_usage_by_conversation",
      "arguments": "p_client_id uuid, p_days integer DEFAULT 30, p_limit integer DEFAULT 20",
      "return_type": "TABLE(phone text, conversation_name text, total_tokens bigint, total_cost numeric, request_count bigint, openai_tokens bigint, groq_tokens bigint)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_usage_by_conversation(p_client_id uuid, p_days integer DEFAULT 30, p_limit integer DEFAULT 20)\n RETURNS TABLE(phone text, conversation_name text, total_tokens bigint, total_cost numeric, request_count bigint, openai_tokens bigint, groq_tokens bigint)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    ul.phone,\r\n    COALESCE(cw.nome, 'Sem nome') as conversation_name,\r\n    SUM(ul.total_tokens)::BIGINT as total_tokens,\r\n    SUM(ul.cost_usd)::NUMERIC as total_cost,\r\n    COUNT(*)::BIGINT as request_count,\r\n    SUM(CASE WHEN ul.source = 'openai' THEN ul.total_tokens ELSE 0 END)::BIGINT as openai_tokens,\r\n    SUM(CASE WHEN ul.source = 'groq' THEN ul.total_tokens ELSE 0 END)::BIGINT as groq_tokens\r\n  FROM usage_logs ul\r\n  LEFT JOIN clientes_whatsapp cw ON ul.phone = cw.telefone::TEXT AND cw.client_id = p_client_id\r\n  WHERE ul.client_id = p_client_id\r\n    AND ul.created_at >= NOW() - (p_days || ' days')::INTERVAL\r\n  GROUP BY ul.phone, cw.nome\r\n  ORDER BY total_tokens DESC\r\n  LIMIT p_limit;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_usage_by_operation_type",
      "arguments": "p_client_id uuid, p_days integer DEFAULT 30",
      "return_type": "TABLE(source text, model text, operation_type text, total_tokens bigint, total_cost numeric, request_count bigint)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_usage_by_operation_type(p_client_id uuid, p_days integer DEFAULT 30)\n RETURNS TABLE(source text, model text, operation_type text, total_tokens bigint, total_cost numeric, request_count bigint)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    ul.source,\r\n    COALESCE(ul.model, 'unknown') as model,\r\n    COALESCE(ul.metadata->>'operation_type', 'unknown') as operation_type,\r\n    SUM(ul.total_tokens)::BIGINT as total_tokens,\r\n    SUM(ul.cost_usd)::NUMERIC as total_cost,\r\n    COUNT(*)::BIGINT as request_count\r\n  FROM usage_logs ul\r\n  WHERE ul.client_id = p_client_id\r\n    AND ul.created_at >= NOW() - (p_days || ' days')::INTERVAL\r\n  GROUP BY ul.source, ul.model, ul.metadata->>'operation_type'\r\n  ORDER BY total_cost DESC;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_usage_summary",
      "arguments": "p_client_id uuid, p_start_date timestamp with time zone DEFAULT (now() - '30 days'::interval), p_end_date timestamp with time zone DEFAULT now()",
      "return_type": "TABLE(source text, total_tokens bigint, total_messages bigint, total_cost numeric)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_usage_summary(p_client_id uuid, p_start_date timestamp with time zone DEFAULT (now() - '30 days'::interval), p_end_date timestamp with time zone DEFAULT now())\n RETURNS TABLE(source text, total_tokens bigint, total_messages bigint, total_cost numeric)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  SELECT\r\n    ul.source,\r\n    SUM(ul.tokens_used) as total_tokens,\r\n    SUM(ul.messages_sent) as total_messages,\r\n    SUM(ul.cost_usd) as total_cost\r\n  FROM usage_logs ul\r\n  WHERE ul.client_id = p_client_id\r\n    AND ul.created_at BETWEEN p_start_date AND p_end_date\r\n  GROUP BY ul.source;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_user_client_id",
      "arguments": "",
      "return_type": "uuid",
      "definition": "CREATE OR REPLACE FUNCTION public.get_user_client_id()\n RETURNS uuid\n LANGUAGE sql\n STABLE SECURITY DEFINER\nAS $function$\r\n  SELECT client_id FROM public.user_profiles WHERE id = auth.uid()\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_user_tenant_id",
      "arguments": "",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.get_user_tenant_id()\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  user_tenant_id INTEGER;\r\n  user_email TEXT;\r\nBEGIN\r\n  -- Extrair email do JWT do Supabase\r\n  user_email := auth.jwt() ->> 'email';\r\n  \r\n  IF user_email IS NULL THEN\r\n    RETURN NULL;\r\n  END IF;\r\n  \r\n  -- Buscar tenant_id do usurio\r\n  SELECT tenant_id INTO user_tenant_id\r\n  FROM public.users\r\n  WHERE email = user_email\r\n    AND is_active = true\r\n  LIMIT 1;\r\n  \r\n  RETURN user_tenant_id;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_vault_secret",
      "arguments": "p_name text",
      "return_type": "text",
      "definition": "CREATE OR REPLACE FUNCTION public.get_vault_secret(p_name text)\n RETURNS text\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\r\nDECLARE\r\n  v_secret_id UUID;\r\n  v_decrypted_secret TEXT;\r\nBEGIN\r\n  -- Find secret ID by name\r\n  SELECT id INTO v_secret_id\r\n  FROM vault.secrets\r\n  WHERE name = p_name\r\n  LIMIT 1;\r\n\r\n  IF v_secret_id IS NULL THEN\r\n    RAISE EXCEPTION 'Secret \"%\" not found', p_name;\r\n  END IF;\r\n\r\n  -- Decrypt secret\r\n  SELECT decrypted_secret INTO v_decrypted_secret\r\n  FROM vault.decrypted_secrets\r\n  WHERE id = v_secret_id;\r\n\r\n  RETURN v_decrypted_secret;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "get_weekly_evolution",
      "arguments": "p_client_id uuid, p_weeks integer DEFAULT 12",
      "return_type": "TABLE(week_start date, week_number integer, total_tokens bigint, openai_tokens bigint, groq_tokens bigint, total_cost numeric)",
      "definition": "CREATE OR REPLACE FUNCTION public.get_weekly_evolution(p_client_id uuid, p_weeks integer DEFAULT 12)\n RETURNS TABLE(week_start date, week_number integer, total_tokens bigint, openai_tokens bigint, groq_tokens bigint, total_cost numeric)\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  RETURN QUERY\r\n  WITH weeks AS (\r\n    SELECT \r\n      DATE_TRUNC('week', ul.created_at)::DATE as week_start,\r\n      EXTRACT(WEEK FROM ul.created_at)::INTEGER as week_number,\r\n      ul.source,\r\n      SUM(ul.total_tokens) as tokens,\r\n      SUM(ul.cost_usd) as cost\r\n    FROM usage_logs ul\r\n    WHERE ul.client_id = p_client_id\r\n      AND ul.created_at >= DATE_TRUNC('week', NOW()) - ((p_weeks - 1) || ' weeks')::INTERVAL\r\n    GROUP BY DATE_TRUNC('week', ul.created_at), EXTRACT(WEEK FROM ul.created_at), ul.source\r\n  )\r\n  SELECT\r\n    w.week_start,\r\n    w.week_number,\r\n    SUM(w.tokens)::BIGINT as total_tokens,\r\n    SUM(CASE WHEN w.source = 'openai' THEN w.tokens ELSE 0 END)::BIGINT as openai_tokens,\r\n    SUM(CASE WHEN w.source = 'groq' THEN w.tokens ELSE 0 END)::BIGINT as groq_tokens,\r\n    SUM(w.cost)::NUMERIC as total_cost\r\n  FROM weeks w\r\n  GROUP BY w.week_start, w.week_number\r\n  ORDER BY w.week_start ASC;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gin_extract_query_trgm",
      "arguments": "text, internal, smallint, internal, internal, internal, internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gin_extract_query_trgm(text, internal, smallint, internal, internal, internal, internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gin_extract_query_trgm$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gin_extract_value_trgm",
      "arguments": "text, internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gin_extract_value_trgm(text, internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gin_extract_value_trgm$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gin_trgm_consistent",
      "arguments": "internal, smallint, text, integer, internal, internal, internal, internal",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.gin_trgm_consistent(internal, smallint, text, integer, internal, internal, internal, internal)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gin_trgm_consistent$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gin_trgm_triconsistent",
      "arguments": "internal, smallint, text, integer, internal, internal, internal",
      "return_type": "\"char\"",
      "definition": "CREATE OR REPLACE FUNCTION public.gin_trgm_triconsistent(internal, smallint, text, integer, internal, internal, internal)\n RETURNS \"char\"\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gin_trgm_triconsistent$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_compress",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_compress(internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_compress$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_consistent",
      "arguments": "internal, text, smallint, oid, internal",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_consistent(internal, text, smallint, oid, internal)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_consistent$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_decompress",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_decompress(internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_decompress$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_distance",
      "arguments": "internal, text, smallint, oid, internal",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_distance(internal, text, smallint, oid, internal)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_in",
      "arguments": "cstring",
      "return_type": "gtrgm",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_in(cstring)\n RETURNS gtrgm\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_options",
      "arguments": "internal",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_options(internal)\n RETURNS void\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE\nAS '$libdir/pg_trgm', $function$gtrgm_options$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_out",
      "arguments": "gtrgm",
      "return_type": "cstring",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_out(gtrgm)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_out$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_penalty",
      "arguments": "internal, internal, internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_penalty(internal, internal, internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_penalty$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_picksplit",
      "arguments": "internal, internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_picksplit(internal, internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_picksplit$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_same",
      "arguments": "gtrgm, gtrgm, internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_same(gtrgm, gtrgm, internal)\n RETURNS internal\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_same$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "gtrgm_union",
      "arguments": "internal, internal",
      "return_type": "gtrgm",
      "definition": "CREATE OR REPLACE FUNCTION public.gtrgm_union(internal, internal)\n RETURNS gtrgm\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$gtrgm_union$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec",
      "arguments": "halfvec, integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec(halfvec, integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_accum",
      "arguments": "double precision[], halfvec",
      "return_type": "double precision[]",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_accum(double precision[], halfvec)\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_accum$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_add",
      "arguments": "halfvec, halfvec",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_add(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_add$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_avg",
      "arguments": "double precision[]",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_avg(double precision[])\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_avg$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_cmp",
      "arguments": "halfvec, halfvec",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_cmp(halfvec, halfvec)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_cmp$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_combine",
      "arguments": "double precision[], double precision[]",
      "return_type": "double precision[]",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_combine(double precision[], double precision[])\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_combine$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_concat",
      "arguments": "halfvec, halfvec",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_concat(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_concat$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_eq",
      "arguments": "halfvec, halfvec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_eq(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_eq$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_ge",
      "arguments": "halfvec, halfvec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_ge(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_ge$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_gt",
      "arguments": "halfvec, halfvec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_gt(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_gt$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_in",
      "arguments": "cstring, oid, integer",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_in(cstring, oid, integer)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_l2_squared_distance",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_l2_squared_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_squared_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_le",
      "arguments": "halfvec, halfvec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_le(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_le$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_lt",
      "arguments": "halfvec, halfvec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_lt(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_lt$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_mul",
      "arguments": "halfvec, halfvec",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_mul(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_mul$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_ne",
      "arguments": "halfvec, halfvec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_ne(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_ne$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_negative_inner_product",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_negative_inner_product(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_negative_inner_product$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_out",
      "arguments": "halfvec",
      "return_type": "cstring",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_out(halfvec)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_out$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_recv",
      "arguments": "internal, oid, integer",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_recv(internal, oid, integer)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_recv$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_send",
      "arguments": "halfvec",
      "return_type": "bytea",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_send(halfvec)\n RETURNS bytea\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_send$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_spherical_distance",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_spherical_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_spherical_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_sub",
      "arguments": "halfvec, halfvec",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_sub(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_sub$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_to_float4",
      "arguments": "halfvec, integer, boolean",
      "return_type": "real[]",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_to_float4(halfvec, integer, boolean)\n RETURNS real[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_to_float4$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_to_sparsevec",
      "arguments": "halfvec, integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_to_sparsevec(halfvec, integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_to_sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_to_vector",
      "arguments": "halfvec, integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_to_vector(halfvec, integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_to_vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "halfvec_typmod_in",
      "arguments": "cstring[]",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.halfvec_typmod_in(cstring[])\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_typmod_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "hamming_distance",
      "arguments": "bit, bit",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.hamming_distance(bit, bit)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$hamming_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "handle_new_user",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.handle_new_user()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  INSERT INTO public.user_profiles (id, email, role, client_id, full_name)\r\n  VALUES (\r\n    NEW.id,\r\n    NEW.email,\r\n    COALESCE(NEW.raw_user_meta_data->>'role', 'user'),\r\n    (NEW.raw_user_meta_data->>'client_id')::UUID,\r\n    NEW.raw_user_meta_data->>'full_name'\r\n  );\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "hnsw_bit_support",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.hnsw_bit_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$hnsw_bit_support$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "hnsw_halfvec_support",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.hnsw_halfvec_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$hnsw_halfvec_support$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "hnsw_sparsevec_support",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.hnsw_sparsevec_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$hnsw_sparsevec_support$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "hnswhandler",
      "arguments": "internal",
      "return_type": "index_am_handler",
      "definition": "CREATE OR REPLACE FUNCTION public.hnswhandler(internal)\n RETURNS index_am_handler\n LANGUAGE c\nAS '$libdir/vector', $function$hnswhandler$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "increment_budget_usage",
      "arguments": "p_client_id uuid, p_amount numeric",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.increment_budget_usage(p_client_id uuid, p_amount numeric)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  UPDATE client_budgets\r\n  SET current_usage = current_usage + p_amount\r\n  WHERE client_id = p_client_id;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "increment_tts_cache_hit",
      "arguments": "cache_text_hash text",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.increment_tts_cache_hit(cache_text_hash text)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  UPDATE tts_cache\r\n  SET hit_count = hit_count + 1\r\n  WHERE text_hash = cache_text_hash;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "increment_unified_budget",
      "arguments": "p_client_id uuid, p_tokens bigint, p_cost_brl numeric",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.increment_unified_budget(p_client_id uuid, p_tokens bigint, p_cost_brl numeric)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  v_budget client_budgets%ROWTYPE;\r\n  v_should_pause BOOLEAN := false;\r\n  v_pause_reason TEXT := NULL;\r\nBEGIN\r\n  -- Get current budget\r\n  SELECT * INTO v_budget\r\n  FROM client_budgets\r\n  WHERE client_id = p_client_id;\r\n\r\n  IF NOT FOUND THEN\r\n    -- No budget configured, allow unlimited\r\n    RETURN;\r\n  END IF;\r\n\r\n  -- Increment based on mode\r\n  CASE v_budget.budget_mode\r\n    WHEN 'tokens' THEN\r\n      -- Token-only mode\r\n      UPDATE client_budgets\r\n      SET current_tokens = current_tokens + p_tokens\r\n      WHERE client_id = p_client_id;\r\n\r\n      -- Check if limit reached\r\n      IF v_budget.token_limit > 0 AND (v_budget.current_tokens + p_tokens) >= v_budget.token_limit THEN\r\n        v_should_pause := true;\r\n        v_pause_reason := 'token_limit';\r\n      END IF;\r\n\r\n    WHEN 'brl' THEN\r\n      -- BRL-only mode\r\n      UPDATE client_budgets\r\n      SET current_brl = current_brl + p_cost_brl\r\n      WHERE client_id = p_client_id;\r\n\r\n      -- Check if limit reached\r\n      IF v_budget.brl_limit > 0 AND (v_budget.current_brl + p_cost_brl) >= v_budget.brl_limit THEN\r\n        v_should_pause := true;\r\n        v_pause_reason := 'brl_limit';\r\n      END IF;\r\n\r\n    WHEN 'both' THEN\r\n      -- Hybrid mode: track BOTH\r\n      UPDATE client_budgets\r\n      SET\r\n        current_tokens = current_tokens + p_tokens,\r\n        current_brl = current_brl + p_cost_brl\r\n      WHERE client_id = p_client_id;\r\n\r\n      -- Check BOTH limits\r\n      IF v_budget.token_limit > 0 AND (v_budget.current_tokens + p_tokens) >= v_budget.token_limit THEN\r\n        v_should_pause := true;\r\n        v_pause_reason := 'token_limit';\r\n      END IF;\r\n\r\n      IF v_budget.brl_limit > 0 AND (v_budget.current_brl + p_cost_brl) >= v_budget.brl_limit THEN\r\n        IF v_pause_reason = 'token_limit' THEN\r\n          v_pause_reason := 'both'; -- Both limits hit!\r\n        ELSE\r\n          v_pause_reason := 'brl_limit';\r\n        END IF;\r\n        v_should_pause := true;\r\n      END IF;\r\n  END CASE;\r\n\r\n  -- Auto-pause if needed\r\n  IF v_should_pause AND v_budget.pause_at_limit AND NOT v_budget.is_paused THEN\r\n    UPDATE client_budgets\r\n    SET\r\n      is_paused = true,\r\n      pause_reason = v_pause_reason\r\n    WHERE client_id = p_client_id;\r\n\r\n    -- TODO: Send alert email/webhook\r\n    RAISE NOTICE 'Client % paused due to: %', p_client_id, v_pause_reason;\r\n  END IF;\r\n\r\n  -- Trigger alert flags (80%, 90%, 100%)\r\n  -- Token alerts\r\n  IF v_budget.budget_mode IN ('tokens', 'both') AND v_budget.token_limit > 0 THEN\r\n    UPDATE client_budgets\r\n    SET\r\n      alert_80_sent = CASE WHEN token_usage_percentage >= 80 THEN true ELSE alert_80_sent END,\r\n      alert_90_sent = CASE WHEN token_usage_percentage >= 90 THEN true ELSE alert_90_sent END,\r\n      alert_100_sent = CASE WHEN token_usage_percentage >= 100 THEN true ELSE alert_100_sent END\r\n    WHERE client_id = p_client_id;\r\n  END IF;\r\n\r\n  -- BRL alerts\r\n  IF v_budget.budget_mode IN ('brl', 'both') AND v_budget.brl_limit > 0 THEN\r\n    UPDATE client_budgets\r\n    SET\r\n      alert_80_sent = CASE WHEN brl_usage_percentage >= 80 THEN true ELSE alert_80_sent END,\r\n      alert_90_sent = CASE WHEN brl_usage_percentage >= 90 THEN true ELSE alert_90_sent END,\r\n      alert_100_sent = CASE WHEN brl_usage_percentage >= 100 THEN true ELSE alert_100_sent END\r\n    WHERE client_id = p_client_id;\r\n  END IF;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "inner_product",
      "arguments": "sparsevec, sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.inner_product(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_inner_product$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "inner_product",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.inner_product(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_inner_product$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "inner_product",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.inner_product(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$inner_product$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "is_budget_exceeded",
      "arguments": "p_client_id uuid",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.is_budget_exceeded(p_client_id uuid)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  v_budget client_budgets%ROWTYPE;\r\nBEGIN\r\n  SELECT * INTO v_budget\r\n  FROM client_budgets\r\n  WHERE client_id = p_client_id;\r\n\r\n  IF NOT FOUND THEN\r\n    RETURN false; -- No budget configured\r\n  END IF;\r\n\r\n  IF v_budget.is_paused THEN\r\n    RETURN true; -- Already paused\r\n  END IF;\r\n\r\n  RETURN v_budget.current_usage >= v_budget.budget_limit;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "is_message_processed",
      "arguments": "p_client_id uuid, p_message_id text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.is_message_processed(p_client_id uuid, p_message_id text)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  exists_count INTEGER;\r\nBEGIN\r\n  SELECT COUNT(*) INTO exists_count\r\n  FROM public.webhook_dedup\r\n  WHERE client_id = p_client_id\r\n    AND message_id = p_message_id\r\n    AND processed_at > (now() - INTERVAL '24 hours'); -- Apenas ltimas 24h\r\n  \r\n  RETURN exists_count > 0;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "ivfflat_bit_support",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.ivfflat_bit_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$ivfflat_bit_support$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "ivfflat_halfvec_support",
      "arguments": "internal",
      "return_type": "internal",
      "definition": "CREATE OR REPLACE FUNCTION public.ivfflat_halfvec_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$ivfflat_halfvec_support$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "ivfflathandler",
      "arguments": "internal",
      "return_type": "index_am_handler",
      "definition": "CREATE OR REPLACE FUNCTION public.ivfflathandler(internal)\n RETURNS index_am_handler\n LANGUAGE c\nAS '$libdir/vector', $function$ivfflathandler$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "jaccard_distance",
      "arguments": "bit, bit",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.jaccard_distance(bit, bit)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$jaccard_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l1_distance",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l1_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l1_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l1_distance",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l1_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$l1_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l1_distance",
      "arguments": "sparsevec, sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l1_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l1_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_distance",
      "arguments": "halfvec, halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_distance",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$l2_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_distance",
      "arguments": "sparsevec, sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_norm",
      "arguments": "sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_norm(sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_norm$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_norm",
      "arguments": "halfvec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_norm(halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_norm$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_normalize",
      "arguments": "vector",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_normalize(vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$l2_normalize$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_normalize",
      "arguments": "sparsevec",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_normalize(sparsevec)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_normalize$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "l2_normalize",
      "arguments": "halfvec",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.l2_normalize(halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_normalize$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "list_vault_secrets",
      "arguments": "",
      "return_type": "TABLE(id uuid, name text, description text, created_at timestamp with time zone)",
      "definition": "CREATE OR REPLACE FUNCTION public.list_vault_secrets()\n RETURNS TABLE(id uuid, name text, description text, created_at timestamp with time zone)\n LANGUAGE sql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\r\n  SELECT id, name, description, created_at\r\n  FROM vault.secrets\r\n  ORDER BY created_at DESC;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "mark_message_processed",
      "arguments": "p_client_id uuid, p_message_id text, p_dedup_key text, p_payload jsonb DEFAULT NULL::jsonb",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.mark_message_processed(p_client_id uuid, p_message_id text, p_dedup_key text, p_payload jsonb DEFAULT NULL::jsonb)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  INSERT INTO public.webhook_dedup (\r\n    client_id,\r\n    message_id,\r\n    dedup_key,\r\n    webhook_payload,\r\n    processed_at\r\n  ) VALUES (\r\n    p_client_id,\r\n    p_message_id,\r\n    p_dedup_key,\r\n    p_payload,\r\n    now()\r\n  )\r\n  ON CONFLICT (client_id, message_id)\r\n  DO UPDATE SET\r\n    processed_at = now(),\r\n    webhook_payload = EXCLUDED.webhook_payload;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "match_documents",
      "arguments": "query_embedding vector, match_threshold double precision DEFAULT 0.8, match_count integer DEFAULT 5, filter_client_id uuid DEFAULT NULL::uuid",
      "return_type": "TABLE(id bigint, content text, metadata jsonb, similarity double precision, original_file_url text, original_file_path text, original_mime_type text, original_file_size integer)",
      "definition": "CREATE OR REPLACE FUNCTION public.match_documents(query_embedding vector, match_threshold double precision DEFAULT 0.8, match_count integer DEFAULT 5, filter_client_id uuid DEFAULT NULL::uuid)\n RETURNS TABLE(id bigint, content text, metadata jsonb, similarity double precision, original_file_url text, original_file_path text, original_mime_type text, original_file_size integer)\n LANGUAGE plpgsql\nAS $function$\r\n  BEGIN\r\n    RETURN QUERY\r\n    SELECT\r\n      documents.id,\r\n      documents.content,\r\n      documents.metadata,\r\n      (1 - (documents.embedding <=>\r\n  query_embedding))::double precision AS\r\n  similarity,\r\n      documents.original_file_url,\r\n      documents.original_file_path,\r\n      documents.original_mime_type,\r\n      documents.original_file_size\r\n    FROM public.documents\r\n    WHERE\r\n      (filter_client_id IS NULL OR\r\n  documents.client_id = filter_client_id)        \r\n      AND (1 - (documents.embedding <=>\r\n  query_embedding)) >= match_threshold\r\n    ORDER BY documents.embedding <=>\r\n  query_embedding\r\n    LIMIT match_count;\r\n  END;\r\n  $function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "migrate_execution_logs_to_client",
      "arguments": "target_client_id uuid, phone_filter text DEFAULT NULL::text",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.migrate_execution_logs_to_client(target_client_id uuid, phone_filter text DEFAULT NULL::text)\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  updated_count INTEGER;\r\nBEGIN\r\n  IF phone_filter IS NOT NULL THEN\r\n    UPDATE public.execution_logs\r\n    SET client_id = target_client_id\r\n    WHERE client_id IS NULL\r\n      AND metadata->>'from' = phone_filter;\r\n  ELSE\r\n    UPDATE public.execution_logs\r\n    SET client_id = target_client_id\r\n    WHERE client_id IS NULL;\r\n  END IF;\r\n\r\n  GET DIAGNOSTICS updated_count = ROW_COUNT;\r\n  RETURN updated_count;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "reset_budget_usage",
      "arguments": "p_client_id uuid",
      "return_type": "void",
      "definition": "CREATE OR REPLACE FUNCTION public.reset_budget_usage(p_client_id uuid)\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  UPDATE client_budgets\r\n  SET\r\n    current_tokens = 0,\r\n    current_brl = 0,\r\n    token_usage_percentage = 0,\r\n    brl_usage_percentage = 0,\r\n    usage_percentage = 0,\r\n    last_reset_at = NOW(),\r\n    alert_80_sent = false,\r\n    alert_90_sent = false,\r\n    alert_100_sent = false,\r\n    is_paused = false,\r\n    pause_reason = NULL\r\n  WHERE client_id = p_client_id;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "set_limit",
      "arguments": "real",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.set_limit(real)\n RETURNS real\n LANGUAGE c\n STRICT\nAS '$libdir/pg_trgm', $function$set_limit$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "show_limit",
      "arguments": "",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.show_limit()\n RETURNS real\n LANGUAGE c\n STABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$show_limit$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "show_trgm",
      "arguments": "text",
      "return_type": "text[]",
      "definition": "CREATE OR REPLACE FUNCTION public.show_trgm(text)\n RETURNS text[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$show_trgm$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "similarity",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.similarity(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$similarity$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "similarity_dist",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.similarity_dist(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$similarity_dist$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "similarity_op",
      "arguments": "text, text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.similarity_op(text, text)\n RETURNS boolean\n LANGUAGE c\n STABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$similarity_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec",
      "arguments": "sparsevec, integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec(sparsevec, integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_cmp",
      "arguments": "sparsevec, sparsevec",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_cmp(sparsevec, sparsevec)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_cmp$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_eq",
      "arguments": "sparsevec, sparsevec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_eq(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_eq$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_ge",
      "arguments": "sparsevec, sparsevec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_ge(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_ge$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_gt",
      "arguments": "sparsevec, sparsevec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_gt(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_gt$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_in",
      "arguments": "cstring, oid, integer",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_in(cstring, oid, integer)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_l2_squared_distance",
      "arguments": "sparsevec, sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_l2_squared_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_squared_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_le",
      "arguments": "sparsevec, sparsevec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_le(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_le$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_lt",
      "arguments": "sparsevec, sparsevec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_lt(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_lt$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_ne",
      "arguments": "sparsevec, sparsevec",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_ne(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_ne$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_negative_inner_product",
      "arguments": "sparsevec, sparsevec",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_negative_inner_product(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_negative_inner_product$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_out",
      "arguments": "sparsevec",
      "return_type": "cstring",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_out(sparsevec)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_out$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_recv",
      "arguments": "internal, oid, integer",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_recv(internal, oid, integer)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_recv$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_send",
      "arguments": "sparsevec",
      "return_type": "bytea",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_send(sparsevec)\n RETURNS bytea\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_send$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_to_halfvec",
      "arguments": "sparsevec, integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_to_halfvec(sparsevec, integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_to_halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_to_vector",
      "arguments": "sparsevec, integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_to_vector(sparsevec, integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_to_vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "sparsevec_typmod_in",
      "arguments": "cstring[]",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_typmod_in(cstring[])\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_typmod_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "strict_word_similarity",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.strict_word_similarity(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$strict_word_similarity$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "strict_word_similarity_commutator_op",
      "arguments": "text, text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.strict_word_similarity_commutator_op(text, text)\n RETURNS boolean\n LANGUAGE c\n STABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$strict_word_similarity_commutator_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "strict_word_similarity_dist_commutator_op",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.strict_word_similarity_dist_commutator_op(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$strict_word_similarity_dist_commutator_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "strict_word_similarity_dist_op",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.strict_word_similarity_dist_op(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$strict_word_similarity_dist_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "strict_word_similarity_op",
      "arguments": "text, text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.strict_word_similarity_op(text, text)\n RETURNS boolean\n LANGUAGE c\n STABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$strict_word_similarity_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "subvector",
      "arguments": "halfvec, integer, integer",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.subvector(halfvec, integer, integer)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_subvector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "subvector",
      "arguments": "vector, integer, integer",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.subvector(vector, integer, integer)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$subvector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "trigger_cleanup_old_dedup",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.trigger_cleanup_old_dedup()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  -- Cleanup apenas se ltimo cleanup foi h mais de 1 hora\r\n  -- (para evitar executar em cada insero)\r\n  PERFORM public.cleanup_old_webhook_dedup(24);\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "try_acquire_webhook_lock",
      "arguments": "p_client_id uuid, p_message_id text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.try_acquire_webhook_lock(p_client_id uuid, p_message_id text)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nDECLARE\r\n  lock_key BIGINT;\r\n  lock_acquired BOOLEAN;\r\nBEGIN\r\n  -- Generate 64-bit lock key from client_id + message_id hash\r\n  -- This ensures consistent lock key for same message across requests\r\n  lock_key := abs(hashtext(p_client_id::TEXT || ':' || p_message_id));\r\n\r\n  -- Try to acquire advisory lock (non-blocking)\r\n  -- Returns true if lock acquired, false if already locked\r\n  lock_acquired := pg_try_advisory_lock(lock_key);\r\n\r\n  IF lock_acquired THEN\r\n    -- Lock acquired successfully! Mark message as processed atomically\r\n    INSERT INTO public.webhook_dedup (\r\n      client_id,\r\n      message_id,\r\n      dedup_key,\r\n      processed_at\r\n    ) VALUES (\r\n      p_client_id,\r\n      p_message_id,\r\n      'processed:' || p_client_id::TEXT || ':' || p_message_id,\r\n      now()\r\n    )\r\n    ON CONFLICT (client_id, message_id) DO NOTHING;\r\n\r\n    -- Release lock immediately (we don't need to hold it)\r\n    PERFORM pg_advisory_unlock(lock_key);\r\n\r\n    RETURN true;  -- First time processing this message\r\n  ELSE\r\n    RETURN false;  -- Message is already being processed by another instance\r\n  END IF;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_bot_configurations_updated_at",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_bot_configurations_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_client_secret",
      "arguments": "secret_id uuid, new_secret_value text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.update_client_secret(secret_id uuid, new_secret_value text)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  -- CORREO: vault.update_secret aceita apenas 2 parmetros (secret_id, secret)\r\n  -- No aceita name e description como parmetros\r\n  PERFORM vault.update_secret(secret_id, new_secret_value);\r\n\r\n  RETURN TRUE;\r\nEXCEPTION\r\n  WHEN OTHERS THEN\r\n    RAISE NOTICE 'Erro ao atualizar secret %: %', secret_id, SQLERRM;\r\n    RETURN FALSE;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_clientes_whatsapp_updated_at",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_clientes_whatsapp_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_gateway_configurations_updated_at",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_gateway_configurations_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_interactive_flows_updated_at",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_interactive_flows_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = now();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_plan_budgets_updated_at",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_plan_budgets_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_pricing_config_timestamp",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_pricing_config_timestamp()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_shared_gateway_config_updated_at",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_shared_gateway_config_updated_at()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "update_updated_at_column",
      "arguments": "",
      "return_type": "trigger",
      "definition": "CREATE OR REPLACE FUNCTION public.update_updated_at_column()\n RETURNS trigger\n LANGUAGE plpgsql\nAS $function$\r\nBEGIN\r\n  NEW.updated_at = NOW();\r\n  RETURN NEW;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "upsert_customer_safe",
      "arguments": "p_telefone numeric, p_nome text, p_client_id uuid",
      "return_type": "TABLE(telefone numeric, nome text, status text, created_at timestamp with time zone, client_id uuid)",
      "definition": "CREATE OR REPLACE FUNCTION public.upsert_customer_safe(p_telefone numeric, p_nome text, p_client_id uuid)\n RETURNS TABLE(telefone numeric, nome text, status text, created_at timestamp with time zone, client_id uuid)\n LANGUAGE plpgsql\n SECURITY DEFINER\nAS $function$\r\nBEGIN\r\n  -- Atomic upsert: Single operation, no race condition\r\n  -- Preserves 'humano'/'transferido' status on conflict\r\n  RETURN QUERY\r\n  INSERT INTO clientes_whatsapp (telefone, nome, status, client_id, created_at)\r\n  VALUES (\r\n    p_telefone,\r\n    p_nome,\r\n    'fluxo_inicial',  -- Default status for new customers\r\n    p_client_id,\r\n    now()\r\n  )\r\n  ON CONFLICT (telefone, client_id) DO UPDATE SET\r\n    -- CRITICAL: Preserve 'humano'/'transferido' status\r\n    -- Only update to 'fluxo_inicial' if current status is not one of these\r\n    status = CASE\r\n      WHEN clientes_whatsapp.status IN ('humano', 'transferido')\r\n      THEN clientes_whatsapp.status\r\n      ELSE EXCLUDED.status\r\n    END,\r\n    -- Update name only if new name is provided and not empty\r\n    nome = CASE\r\n      WHEN EXCLUDED.nome IS NOT NULL AND EXCLUDED.nome != ''\r\n      THEN EXCLUDED.nome\r\n      ELSE clientes_whatsapp.nome\r\n    END\r\n  RETURNING *;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "upsert_pricing_config",
      "arguments": "p_client_id uuid, p_provider text, p_model text, p_prompt_price numeric, p_completion_price numeric, p_unit text DEFAULT 'per_1k_tokens'::text",
      "return_type": "pricing_config",
      "definition": "CREATE OR REPLACE FUNCTION public.upsert_pricing_config(p_client_id uuid, p_provider text, p_model text, p_prompt_price numeric, p_completion_price numeric, p_unit text DEFAULT 'per_1k_tokens'::text)\n RETURNS pricing_config\n LANGUAGE plpgsql\nAS $function$\r\nDECLARE\r\n  v_config pricing_config;\r\nBEGIN\r\n  INSERT INTO pricing_config (\r\n    client_id,\r\n    provider,\r\n    model,\r\n    prompt_price,\r\n    completion_price,\r\n    unit,\r\n    updated_at\r\n  ) VALUES (\r\n    p_client_id,\r\n    p_provider,\r\n    p_model,\r\n    p_prompt_price,\r\n    p_completion_price,\r\n    p_unit,\r\n    NOW()\r\n  )\r\n  ON CONFLICT (client_id, provider, model)\r\n  DO UPDATE SET\r\n    prompt_price = p_prompt_price,\r\n    completion_price = p_completion_price,\r\n    unit = p_unit,\r\n    updated_at = NOW()\r\n  RETURNING * INTO v_config;\r\n\r\n  RETURN v_config;\r\nEND;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "user_client_id",
      "arguments": "",
      "return_type": "uuid",
      "definition": "CREATE OR REPLACE FUNCTION public.user_client_id()\n RETURNS uuid\n LANGUAGE sql\n STABLE SECURITY DEFINER\nAS $function$\r\n  SELECT client_id \r\n  FROM public.user_profiles \r\n  WHERE id = auth.uid()\r\n  LIMIT 1;\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "user_has_role",
      "arguments": "required_role text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.user_has_role(required_role text)\n RETURNS boolean\n LANGUAGE sql\n SECURITY DEFINER\nAS $function$\r\n  SELECT EXISTS (\r\n    SELECT 1 FROM public.user_profiles \r\n    WHERE id = auth.uid() \r\n    AND role = required_role\r\n    AND is_active = true\r\n  );\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "user_is_admin",
      "arguments": "",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.user_is_admin()\n RETURNS boolean\n LANGUAGE sql\n SECURITY DEFINER\nAS $function$\r\n  SELECT EXISTS (\r\n    SELECT 1 FROM public.user_profiles \r\n    WHERE id = auth.uid() \r\n    AND role IN ('admin', 'client_admin')\r\n    AND is_active = true\r\n  );\r\n$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector",
      "arguments": "vector, integer, boolean",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector(vector, integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_accum",
      "arguments": "double precision[], vector",
      "return_type": "double precision[]",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_accum(double precision[], vector)\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_accum$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_add",
      "arguments": "vector, vector",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_add(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_add$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_avg",
      "arguments": "double precision[]",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_avg(double precision[])\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_avg$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_cmp",
      "arguments": "vector, vector",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_cmp(vector, vector)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_cmp$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_combine",
      "arguments": "double precision[], double precision[]",
      "return_type": "double precision[]",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_combine(double precision[], double precision[])\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_combine$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_concat",
      "arguments": "vector, vector",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_concat(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_concat$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_dims",
      "arguments": "vector",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_dims(vector)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_dims$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_dims",
      "arguments": "halfvec",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_dims(halfvec)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_vector_dims$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_eq",
      "arguments": "vector, vector",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_eq(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_eq$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_ge",
      "arguments": "vector, vector",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_ge(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_ge$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_gt",
      "arguments": "vector, vector",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_gt(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_gt$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_in",
      "arguments": "cstring, oid, integer",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_in(cstring, oid, integer)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_l2_squared_distance",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_l2_squared_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_l2_squared_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_le",
      "arguments": "vector, vector",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_le(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_le$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_lt",
      "arguments": "vector, vector",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_lt(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_lt$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_mul",
      "arguments": "vector, vector",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_mul(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_mul$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_ne",
      "arguments": "vector, vector",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_ne(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_ne$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_negative_inner_product",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_negative_inner_product(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_negative_inner_product$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_norm",
      "arguments": "vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_norm(vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_norm$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_out",
      "arguments": "vector",
      "return_type": "cstring",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_out(vector)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_out$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_recv",
      "arguments": "internal, oid, integer",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_recv(internal, oid, integer)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_recv$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_send",
      "arguments": "vector",
      "return_type": "bytea",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_send(vector)\n RETURNS bytea\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_send$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_spherical_distance",
      "arguments": "vector, vector",
      "return_type": "double precision",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_spherical_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_spherical_distance$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_sub",
      "arguments": "vector, vector",
      "return_type": "vector",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_sub(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_sub$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_to_float4",
      "arguments": "vector, integer, boolean",
      "return_type": "real[]",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_to_float4(vector, integer, boolean)\n RETURNS real[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_to_float4$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_to_halfvec",
      "arguments": "vector, integer, boolean",
      "return_type": "halfvec",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_to_halfvec(vector, integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_to_halfvec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_to_sparsevec",
      "arguments": "vector, integer, boolean",
      "return_type": "sparsevec",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_to_sparsevec(vector, integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_to_sparsevec$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "vector_typmod_in",
      "arguments": "cstring[]",
      "return_type": "integer",
      "definition": "CREATE OR REPLACE FUNCTION public.vector_typmod_in(cstring[])\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_typmod_in$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "word_similarity",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.word_similarity(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$word_similarity$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "word_similarity_commutator_op",
      "arguments": "text, text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.word_similarity_commutator_op(text, text)\n RETURNS boolean\n LANGUAGE c\n STABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$word_similarity_commutator_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "word_similarity_dist_commutator_op",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.word_similarity_dist_commutator_op(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$word_similarity_dist_commutator_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "word_similarity_dist_op",
      "arguments": "text, text",
      "return_type": "real",
      "definition": "CREATE OR REPLACE FUNCTION public.word_similarity_dist_op(text, text)\n RETURNS real\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$word_similarity_dist_op$function$\n"
    },
    {
      "function_schema": "public",
      "function_name": "word_similarity_op",
      "arguments": "text, text",
      "return_type": "boolean",
      "definition": "CREATE OR REPLACE FUNCTION public.word_similarity_op(text, text)\n RETURNS boolean\n LANGUAGE c\n STABLE PARALLEL SAFE STRICT\nAS '$libdir/pg_trgm', $function$word_similarity_op$function$\n"
    }
  ],
  "constraints": [
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "2200_41441_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "ai_models_registry_gateway_identifier_key",
      "constraint_type": "UNIQUE",
      "column_name": "gateway_identifier",
      "foreign_table_schema": "public",
      "foreign_table_name": "ai_models_registry",
      "foreign_column_name": "gateway_identifier"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "ai_models_registry_provider_model_name_key",
      "constraint_type": "UNIQUE",
      "column_name": "provider",
      "foreign_table_schema": "public",
      "foreign_table_name": "ai_models_registry",
      "foreign_column_name": "model_name"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "ai_models_registry_provider_model_name_key",
      "constraint_type": "UNIQUE",
      "column_name": "provider",
      "foreign_table_schema": "public",
      "foreign_table_name": "ai_models_registry",
      "foreign_column_name": "provider"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "ai_models_registry_provider_model_name_key",
      "constraint_type": "UNIQUE",
      "column_name": "model_name",
      "foreign_table_schema": "public",
      "foreign_table_name": "ai_models_registry",
      "foreign_column_name": "model_name"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "constraint_name": "ai_models_registry_provider_model_name_key",
      "constraint_type": "UNIQUE",
      "column_name": "model_name",
      "foreign_table_schema": "public",
      "foreign_table_name": "ai_models_registry",
      "foreign_column_name": "provider"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "2200_18275_14_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "2200_18275_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "2200_18275_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "2200_18275_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "2200_18275_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "audit_logs_user_id_fkey1",
      "constraint_type": "FOREIGN KEY",
      "column_name": "user_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "valid_action",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs_backup_poker_system",
      "foreign_column_name": "action"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "valid_action",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs",
      "foreign_column_name": "action"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs_backup_poker_system",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "2200_18285_14_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "2200_18285_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "2200_18285_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "2200_18285_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "2200_18285_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "audit_logs_user_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "user_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "valid_action",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs_backup_poker_system",
      "foreign_column_name": "action"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "valid_action",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs",
      "foreign_column_name": "action"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs_backup_poker_system",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "2200_18295_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "2200_18295_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "2200_18295_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "bot_configurations_client_id_config_key_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "bot_configurations",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "bot_configurations_client_id_config_key_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "bot_configurations",
      "foreign_column_name": "config_key"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "bot_configurations_client_id_config_key_key",
      "constraint_type": "UNIQUE",
      "column_name": "config_key",
      "foreign_table_schema": "public",
      "foreign_table_name": "bot_configurations",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "constraint_name": "bot_configurations_client_id_config_key_key",
      "constraint_type": "UNIQUE",
      "column_name": "config_key",
      "foreign_table_schema": "public",
      "foreign_table_name": "bot_configurations",
      "foreign_column_name": "config_key"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "2200_41314_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "2200_41314_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "2200_41314_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_brl_limit_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "brl_limit"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_brl_usage_percentage_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "brl_usage_percentage"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_budget_limit_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "budget_limit"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_budget_mode_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "budget_mode"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_budget_period_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "budget_period"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_budget_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "budget_type"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_client_id_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_current_brl_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "current_brl"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_current_tokens_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "current_tokens"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_current_usage_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "current_usage"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_pause_reason_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "pause_reason"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_token_limit_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "token_limit"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_token_usage_percentage_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "token_usage_percentage"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "constraint_name": "client_budgets_usage_percentage_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "client_budgets",
      "foreign_column_name": "usage_percentage"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "constraint_name": "2200_18260_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "constraint_name": "2200_18260_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "constraint_name": "2200_18260_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "constraint_name": "clientes_whatsapp_audio_preference_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clientes_whatsapp",
      "foreign_column_name": "audio_preference"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "constraint_name": "clientes_whatsapp_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clientes_whatsapp",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "constraint_name": "clientes_whatsapp_transferred_by_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "transferred_by",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_14_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_22_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_36_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "2200_18880_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_ai_keys_mode_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "ai_keys_mode"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_gateway_api_key_secret_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "gateway_api_key_secret_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_primary_model_provider_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "primary_model_provider"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_slug_key",
      "constraint_type": "UNIQUE",
      "column_name": "slug",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "slug"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_tts_model_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "tts_model"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_tts_provider_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "tts_provider"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "clients_tts_speed_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "tts_speed"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "valid_plan",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "plan"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "constraint_name": "valid_status",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "audit_logs_backup_poker_system",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "2200_18321_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "2200_18321_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "conversations_client_id_phone_key",
      "constraint_type": "UNIQUE",
      "column_name": "phone",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "phone"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "conversations_client_id_phone_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "conversations_client_id_phone_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "phone"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "conversations_client_id_phone_key",
      "constraint_type": "UNIQUE",
      "column_name": "phone",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "constraint_name": "conversations_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "constraint_name": "2200_18331_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "constraint_name": "2200_18331_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "2200_18337_11_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "2200_18337_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "2200_18337_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "2200_18337_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "2200_18337_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "2200_18337_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "constraint_name": "execution_logs_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "execution_logs",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_10_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "2200_34585_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "flow_executions_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "flow_executions_flow_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "flow_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "interactive_flows",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "flow_executions_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "flow_executions",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "valid_history",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "flow_executions",
      "foreign_column_name": "history"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "constraint_name": "valid_variables",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "flow_executions",
      "foreign_column_name": "variables"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "2200_41503_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "hour",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "hour"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "hour",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "date"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "hour",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "date",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "hour"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "date",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "date"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "date",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "hour"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_date_hour_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_cache_performance",
      "foreign_column_name": "date"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "constraint_name": "gateway_cache_performance_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_10_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_12_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "2200_41462_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "gateway_usage_logs_api_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "gateway_usage_logs",
      "foreign_column_name": "api_type"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "gateway_usage_logs_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "gateway_usage_logs_conversation_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "conversation_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "constraint_name": "gateway_usage_logs_model_registry_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "model_registry_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "ai_models_registry",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_10_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_11_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_13_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_14_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "2200_34558_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "interactive_flows_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "interactive_flows_created_by_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "created_by",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "interactive_flows_trigger_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "interactive_flows",
      "foreign_column_name": "trigger_type"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "non_empty_name",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "interactive_flows",
      "foreign_column_name": "name"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "valid_blocks",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "interactive_flows",
      "foreign_column_name": "blocks"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "constraint_name": "valid_edges",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "interactive_flows",
      "foreign_column_name": "edges"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_10_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_12_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_13_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "2200_46085_9_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_category_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "category"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "name",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "language",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "name"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "language",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "language"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "language",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "name",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "name"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "name",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "language"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "name"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "language"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_client_id_name_language_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_created_by_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "created_by",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "constraint_name": "message_templates_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "message_templates",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "2200_18346_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "2200_18346_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "2200_18346_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "2200_18346_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "messages_conversation_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "conversation_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "messages_direction_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "messages",
      "foreign_column_name": "direction"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "messages_media_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "messages",
      "foreign_column_name": "media_type"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "messages_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "messages",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "constraint_name": "messages_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "messages",
      "foreign_column_name": "type"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "2200_18358_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "2200_18358_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "2200_18358_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "2200_18358_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "n8n_chat_histories_client_wamid_unique",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "n8n_chat_histories",
      "foreign_column_name": "wamid"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "n8n_chat_histories_client_wamid_unique",
      "constraint_type": "UNIQUE",
      "column_name": "wamid",
      "foreign_table_schema": "public",
      "foreign_table_name": "n8n_chat_histories",
      "foreign_column_name": "wamid"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "n8n_chat_histories_client_wamid_unique",
      "constraint_type": "UNIQUE",
      "column_name": "wamid",
      "foreign_table_schema": "public",
      "foreign_table_name": "n8n_chat_histories",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "n8n_chat_histories_client_wamid_unique",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "n8n_chat_histories",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "constraint_name": "n8n_chat_histories_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "n8n_chat_histories",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "2200_41290_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "2200_41290_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "2200_41290_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "2200_41290_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "2200_41290_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "plan_budgets_budget_limit_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "plan_budgets",
      "foreign_column_name": "budget_limit"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "plan_budgets_budget_period_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "plan_budgets",
      "foreign_column_name": "budget_period"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "plan_budgets_budget_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "plan_budgets",
      "foreign_column_name": "budget_type"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "constraint_name": "plan_budgets_plan_name_key",
      "constraint_type": "UNIQUE",
      "column_name": "plan_name",
      "foreign_table_schema": "public",
      "foreign_table_name": "plan_budgets",
      "foreign_column_name": "plan_name"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "2200_18245_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "2200_18245_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "2200_18245_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "2200_18245_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "2200_18245_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "2200_18245_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "provider",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "model",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "provider"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "model",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "model"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "model",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "provider",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "provider"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "model"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "provider"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "constraint_name": "pricing_config_client_id_provider_model_key",
      "constraint_type": "UNIQUE",
      "column_name": "provider",
      "foreign_table_schema": "public",
      "foreign_table_name": "pricing_config",
      "foreign_column_name": "model"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "2200_20378_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "2200_20378_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "2200_20378_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "2200_20378_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "push_tokens_platform_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "push_tokens",
      "foreign_column_name": "platform"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "push_tokens_token_key",
      "constraint_type": "UNIQUE",
      "column_name": "token",
      "foreign_table_schema": "public",
      "foreign_table_name": "push_tokens",
      "foreign_column_name": "token"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "constraint_name": "push_tokens_user_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "user_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "constraint_name": "2200_42816_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "constraint_name": "shared_gateway_config_anthropic_api_key_secret_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "anthropic_api_key_secret_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "constraint_name": "shared_gateway_config_gateway_api_key_secret_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "gateway_api_key_secret_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "constraint_name": "shared_gateway_config_google_api_key_secret_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "google_api_key_secret_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "constraint_name": "shared_gateway_config_groq_api_key_secret_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "groq_api_key_secret_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "constraint_name": "shared_gateway_config_openai_api_key_secret_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "openai_api_key_secret_id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "2200_32616_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "2200_32616_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "2200_32616_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "2200_32616_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "2200_32616_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "2200_32616_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "tts_cache_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "tts_cache_client_id_text_hash_key",
      "constraint_type": "UNIQUE",
      "column_name": "text_hash",
      "foreign_table_schema": "public",
      "foreign_table_name": "tts_cache",
      "foreign_column_name": "text_hash"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "tts_cache_client_id_text_hash_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "tts_cache",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "tts_cache_client_id_text_hash_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "tts_cache",
      "foreign_column_name": "text_hash"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "constraint_name": "tts_cache_client_id_text_hash_key",
      "constraint_type": "UNIQUE",
      "column_name": "text_hash",
      "foreign_table_schema": "public",
      "foreign_table_name": "tts_cache",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "2200_32702_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "2200_32702_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "2200_32702_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "2200_32702_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "2200_32702_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "tts_usage_logs_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "constraint_name": "tts_usage_logs_event_type_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "tts_usage_logs",
      "foreign_column_name": "event_type"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "constraint_name": "2200_18370_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "constraint_name": "2200_18370_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "constraint_name": "2200_18370_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "constraint_name": "usage_logs_conversation_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "conversation_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "conversations",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "constraint_name": "usage_logs_source_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "usage_logs",
      "foreign_column_name": "source"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_10_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_11_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "2200_18383_8_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "user_invites_invite_token_key",
      "constraint_type": "UNIQUE",
      "column_name": "invite_token",
      "foreign_table_schema": "public",
      "foreign_table_name": "user_invites",
      "foreign_column_name": "invite_token"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "user_invites_invited_by_user_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "invited_by_user_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "user_profiles",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "user_invites_role_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "user_invites",
      "foreign_column_name": "role"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "constraint_name": "user_invites_status_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "user_invites",
      "foreign_column_name": "status"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "2200_18395_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "2200_18395_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "2200_18395_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "2200_18395_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "2200_18395_6_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "2200_18395_7_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "user_profiles_email_key",
      "constraint_type": "UNIQUE",
      "column_name": "email",
      "foreign_table_schema": "public",
      "foreign_table_name": "user_profiles",
      "foreign_column_name": "email"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "user_profiles_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "id",
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "constraint_name": "user_profiles_role_check",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": "public",
      "foreign_table_name": "user_profiles",
      "foreign_column_name": "role"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "2200_18981_1_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "2200_18981_2_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "2200_18981_3_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "2200_18981_4_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "2200_18981_5_not_null",
      "constraint_type": "CHECK",
      "column_name": null,
      "foreign_table_schema": null,
      "foreign_table_name": null,
      "foreign_column_name": null
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "webhook_dedup_client_id_fkey",
      "constraint_type": "FOREIGN KEY",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "clients",
      "foreign_column_name": "id"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "webhook_dedup_dedup_key_key",
      "constraint_type": "UNIQUE",
      "column_name": "dedup_key",
      "foreign_table_schema": "public",
      "foreign_table_name": "webhook_dedup",
      "foreign_column_name": "dedup_key"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "webhook_dedup_unique_key",
      "constraint_type": "UNIQUE",
      "column_name": "message_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "webhook_dedup",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "webhook_dedup_unique_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "webhook_dedup",
      "foreign_column_name": "message_id"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "webhook_dedup_unique_key",
      "constraint_type": "UNIQUE",
      "column_name": "client_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "webhook_dedup",
      "foreign_column_name": "client_id"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "constraint_name": "webhook_dedup_unique_key",
      "constraint_type": "UNIQUE",
      "column_name": "message_id",
      "foreign_table_schema": "public",
      "foreign_table_name": "webhook_dedup",
      "foreign_column_name": "message_id"
    }
  ],
  "indexes": [
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "index_name": "ai_models_registry_gateway_identifier_key",
      "index_definition": "CREATE UNIQUE INDEX ai_models_registry_gateway_identifier_key ON public.ai_models_registry USING btree (gateway_identifier)"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "index_name": "ai_models_registry_pkey",
      "index_definition": "CREATE UNIQUE INDEX ai_models_registry_pkey ON public.ai_models_registry USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "index_name": "ai_models_registry_provider_model_name_key",
      "index_definition": "CREATE UNIQUE INDEX ai_models_registry_provider_model_name_key ON public.ai_models_registry USING btree (provider, model_name)"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "index_name": "idx_ai_models_registry_gateway_identifier",
      "index_definition": "CREATE INDEX idx_ai_models_registry_gateway_identifier ON public.ai_models_registry USING btree (gateway_identifier)"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "index_name": "idx_ai_models_registry_is_active",
      "index_definition": "CREATE INDEX idx_ai_models_registry_is_active ON public.ai_models_registry USING btree (is_active) WHERE (is_active = true)"
    },
    {
      "table_schema": "public",
      "table_name": "ai_models_registry",
      "index_name": "idx_ai_models_registry_provider",
      "index_definition": "CREATE INDEX idx_ai_models_registry_provider ON public.ai_models_registry USING btree (provider)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs",
      "index_name": "audit_logs_pkey1",
      "index_definition": "CREATE UNIQUE INDEX audit_logs_pkey1 ON public.audit_logs USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "audit_logs_pkey",
      "index_definition": "CREATE UNIQUE INDEX audit_logs_pkey ON public.audit_logs_backup_poker_system USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_action",
      "index_definition": "CREATE INDEX idx_audit_logs_action ON public.audit_logs_backup_poker_system USING btree (action)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_client_activity",
      "index_definition": "CREATE INDEX idx_audit_logs_client_activity ON public.audit_logs_backup_poker_system USING btree (client_id, created_at DESC) WHERE (client_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_client_id",
      "index_definition": "CREATE INDEX idx_audit_logs_client_id ON public.audit_logs_backup_poker_system USING btree (client_id) WHERE (client_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_created_at",
      "index_definition": "CREATE INDEX idx_audit_logs_created_at ON public.audit_logs_backup_poker_system USING btree (created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_resource",
      "index_definition": "CREATE INDEX idx_audit_logs_resource ON public.audit_logs_backup_poker_system USING btree (resource_type, resource_id)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_user_activity",
      "index_definition": "CREATE INDEX idx_audit_logs_user_activity ON public.audit_logs_backup_poker_system USING btree (user_id, created_at DESC) WHERE (user_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "audit_logs_backup_poker_system",
      "index_name": "idx_audit_logs_user_id",
      "index_definition": "CREATE INDEX idx_audit_logs_user_id ON public.audit_logs_backup_poker_system USING btree (user_id) WHERE (user_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "bot_configurations_client_id_config_key_key",
      "index_definition": "CREATE UNIQUE INDEX bot_configurations_client_id_config_key_key ON public.bot_configurations USING btree (client_id, config_key)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "bot_configurations_pkey",
      "index_definition": "CREATE UNIQUE INDEX bot_configurations_pkey ON public.bot_configurations USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "idx_bot_configs_category",
      "index_definition": "CREATE INDEX idx_bot_configs_category ON public.bot_configurations USING btree (category)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "idx_bot_configs_client",
      "index_definition": "CREATE INDEX idx_bot_configs_client ON public.bot_configurations USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "idx_bot_configs_client_key",
      "index_definition": "CREATE INDEX idx_bot_configs_client_key ON public.bot_configurations USING btree (client_id, config_key)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "idx_bot_configs_default",
      "index_definition": "CREATE INDEX idx_bot_configs_default ON public.bot_configurations USING btree (is_default) WHERE (is_default = true)"
    },
    {
      "table_schema": "public",
      "table_name": "bot_configurations",
      "index_name": "idx_bot_configs_key",
      "index_definition": "CREATE INDEX idx_bot_configs_key ON public.bot_configurations USING btree (config_key)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "client_budgets_client_id_key",
      "index_definition": "CREATE UNIQUE INDEX client_budgets_client_id_key ON public.client_budgets USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "client_budgets_pkey",
      "index_definition": "CREATE UNIQUE INDEX client_budgets_pkey ON public.client_budgets USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_brl_usage",
      "index_definition": "CREATE INDEX idx_client_budgets_brl_usage ON public.client_budgets USING btree (brl_usage_percentage) WHERE (budget_mode = ANY (ARRAY['brl'::text, 'both'::text]))"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_budget_mode",
      "index_definition": "CREATE INDEX idx_client_budgets_budget_mode ON public.client_budgets USING btree (budget_mode)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_client_id",
      "index_definition": "CREATE INDEX idx_client_budgets_client_id ON public.client_budgets USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_is_paused",
      "index_definition": "CREATE INDEX idx_client_budgets_is_paused ON public.client_budgets USING btree (is_paused) WHERE (is_paused = true)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_next_reset",
      "index_definition": "CREATE INDEX idx_client_budgets_next_reset ON public.client_budgets USING btree (next_reset_at)"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_token_usage",
      "index_definition": "CREATE INDEX idx_client_budgets_token_usage ON public.client_budgets USING btree (token_usage_percentage) WHERE (budget_mode = ANY (ARRAY['tokens'::text, 'both'::text]))"
    },
    {
      "table_schema": "public",
      "table_name": "client_budgets",
      "index_name": "idx_client_budgets_usage_percentage",
      "index_definition": "CREATE INDEX idx_client_budgets_usage_percentage ON public.client_budgets USING btree (usage_percentage)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "clientes_whatsapp_pkey",
      "index_definition": "CREATE UNIQUE INDEX clientes_whatsapp_pkey ON public.clientes_whatsapp USING btree (telefone, client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_status",
      "index_definition": "CREATE INDEX idx_clientes_status ON public.clientes_whatsapp USING btree (status)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_telefone",
      "index_definition": "CREATE INDEX idx_clientes_telefone ON public.clientes_whatsapp USING btree (telefone)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_audio_preference",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_audio_preference ON public.clientes_whatsapp USING btree (audio_preference)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_client_id",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_client_id ON public.clientes_whatsapp USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_client_phone",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_client_phone ON public.clientes_whatsapp USING btree (client_id, telefone)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_last_read_at",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_last_read_at ON public.clientes_whatsapp USING btree (last_read_at)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_status",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_status ON public.clientes_whatsapp USING btree (client_id, status) WHERE (status = ANY (ARRAY['humano'::text, 'transferido'::text, 'fluxo_inicial'::text]))"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_telefone_client_id",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_telefone_client_id ON public.clientes_whatsapp USING btree (telefone, client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_telefone_last_read",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_telefone_last_read ON public.clientes_whatsapp USING btree (telefone, last_read_at)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_transferred_at",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_transferred_at ON public.clientes_whatsapp USING btree (transferred_at) WHERE (transferred_at IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_transferred_by",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_transferred_by ON public.clientes_whatsapp USING btree (transferred_by) WHERE (transferred_by IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "clientes_whatsapp",
      "index_name": "idx_clientes_whatsapp_updated_at",
      "index_definition": "CREATE INDEX idx_clientes_whatsapp_updated_at ON public.clientes_whatsapp USING btree (updated_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "clients_pkey",
      "index_definition": "CREATE UNIQUE INDEX clients_pkey ON public.clients USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "clients_slug_key",
      "index_definition": "CREATE UNIQUE INDEX clients_slug_key ON public.clients USING btree (slug)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "idx_clients_gateway_key_secret",
      "index_definition": "CREATE INDEX idx_clients_gateway_key_secret ON public.clients USING btree (gateway_api_key_secret_id)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "idx_clients_slug",
      "index_definition": "CREATE UNIQUE INDEX idx_clients_slug ON public.clients USING btree (slug)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "idx_clients_status",
      "index_definition": "CREATE INDEX idx_clients_status ON public.clients USING btree (status) WHERE (status = 'active'::text)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "idx_clients_use_ai_gateway",
      "index_definition": "CREATE INDEX idx_clients_use_ai_gateway ON public.clients USING btree (use_ai_gateway) WHERE (use_ai_gateway = true)"
    },
    {
      "table_schema": "public",
      "table_name": "clients",
      "index_name": "idx_clients_waba_id",
      "index_definition": "CREATE INDEX idx_clients_waba_id ON public.clients USING btree (whatsapp_business_account_id) WHERE (whatsapp_business_account_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "conversations_client_id_phone_key",
      "index_definition": "CREATE UNIQUE INDEX conversations_client_id_phone_key ON public.conversations USING btree (client_id, phone)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "conversations_pkey",
      "index_definition": "CREATE UNIQUE INDEX conversations_pkey ON public.conversations USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "idx_conversations_client_id",
      "index_definition": "CREATE INDEX idx_conversations_client_id ON public.conversations USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "idx_conversations_last_read_at",
      "index_definition": "CREATE INDEX idx_conversations_last_read_at ON public.conversations USING btree (last_read_at)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "idx_conversations_last_update",
      "index_definition": "CREATE INDEX idx_conversations_last_update ON public.conversations USING btree (last_update DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "idx_conversations_phone",
      "index_definition": "CREATE INDEX idx_conversations_phone ON public.conversations USING btree (phone)"
    },
    {
      "table_schema": "public",
      "table_name": "conversations",
      "index_name": "idx_conversations_status",
      "index_definition": "CREATE INDEX idx_conversations_status ON public.conversations USING btree (status)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "documents_pkey",
      "index_definition": "CREATE UNIQUE INDEX documents_pkey ON public.documents USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_client",
      "index_definition": "CREATE INDEX idx_documents_client ON public.documents USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_client_filename",
      "index_definition": "CREATE INDEX idx_documents_client_filename ON public.documents USING btree (client_id, ((metadata ->> 'filename'::text))) WHERE ((metadata ->> 'filename'::text) IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_client_id",
      "index_definition": "CREATE INDEX idx_documents_client_id ON public.documents USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_embedding",
      "index_definition": "CREATE INDEX idx_documents_embedding ON public.documents USING ivfflat (embedding vector_cosine_ops) WITH (lists='100')"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_filename",
      "index_definition": "CREATE INDEX idx_documents_filename ON public.documents USING btree (((metadata ->> 'filename'::text))) WHERE ((metadata ->> 'filename'::text) IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_metadata_client_id",
      "index_definition": "CREATE INDEX idx_documents_metadata_client_id ON public.documents USING btree (((metadata ->> 'client_id'::text)))"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_original_file_path",
      "index_definition": "CREATE INDEX idx_documents_original_file_path ON public.documents USING btree (original_file_path)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_type",
      "index_definition": "CREATE INDEX idx_documents_type ON public.documents USING btree (((metadata ->> 'documentType'::text))) WHERE ((metadata ->> 'documentType'::text) IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "documents",
      "index_name": "idx_documents_with_original_files",
      "index_definition": "CREATE INDEX idx_documents_with_original_files ON public.documents USING btree (client_id, original_file_url) WHERE (original_file_url IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "execution_logs_pkey",
      "index_definition": "CREATE UNIQUE INDEX execution_logs_pkey ON public.execution_logs USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_client_id",
      "index_definition": "CREATE INDEX idx_execution_logs_client_id ON public.execution_logs USING btree (client_id) WHERE (client_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_client_timestamp",
      "index_definition": "CREATE INDEX idx_execution_logs_client_timestamp ON public.execution_logs USING btree (client_id, \"timestamp\" DESC) WHERE (client_id IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_exec_time",
      "index_definition": "CREATE INDEX idx_execution_logs_exec_time ON public.execution_logs USING btree (execution_id, \"timestamp\")"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_execution_id",
      "index_definition": "CREATE INDEX idx_execution_logs_execution_id ON public.execution_logs USING btree (execution_id)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_node_name",
      "index_definition": "CREATE INDEX idx_execution_logs_node_name ON public.execution_logs USING btree (node_name)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_status",
      "index_definition": "CREATE INDEX idx_execution_logs_status ON public.execution_logs USING btree (status)"
    },
    {
      "table_schema": "public",
      "table_name": "execution_logs",
      "index_name": "idx_execution_logs_timestamp",
      "index_definition": "CREATE INDEX idx_execution_logs_timestamp ON public.execution_logs USING btree (\"timestamp\" DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "index_name": "flow_executions_pkey",
      "index_definition": "CREATE UNIQUE INDEX flow_executions_pkey ON public.flow_executions USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "index_name": "idx_flow_executions_active",
      "index_definition": "CREATE INDEX idx_flow_executions_active ON public.flow_executions USING btree (client_id, phone, status) WHERE (status = 'active'::text)"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "index_name": "idx_flow_executions_flow",
      "index_definition": "CREATE INDEX idx_flow_executions_flow ON public.flow_executions USING btree (flow_id)"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "index_name": "idx_flow_executions_phone",
      "index_definition": "CREATE INDEX idx_flow_executions_phone ON public.flow_executions USING btree (client_id, phone)"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "index_name": "idx_flow_executions_status",
      "index_definition": "CREATE INDEX idx_flow_executions_status ON public.flow_executions USING btree (status, last_step_at)"
    },
    {
      "table_schema": "public",
      "table_name": "flow_executions",
      "index_name": "unique_active_execution",
      "index_definition": "CREATE UNIQUE INDEX unique_active_execution ON public.flow_executions USING btree (client_id, phone) WHERE (status = 'active'::text)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "index_name": "gateway_cache_performance_client_id_date_hour_key",
      "index_definition": "CREATE UNIQUE INDEX gateway_cache_performance_client_id_date_hour_key ON public.gateway_cache_performance USING btree (client_id, date, hour)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "index_name": "gateway_cache_performance_pkey",
      "index_definition": "CREATE UNIQUE INDEX gateway_cache_performance_pkey ON public.gateway_cache_performance USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "index_name": "idx_gateway_cache_performance_client_date",
      "index_definition": "CREATE INDEX idx_gateway_cache_performance_client_date ON public.gateway_cache_performance USING btree (client_id, date DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "index_name": "idx_gateway_cache_performance_client_id",
      "index_definition": "CREATE INDEX idx_gateway_cache_performance_client_id ON public.gateway_cache_performance USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_cache_performance",
      "index_name": "idx_gateway_cache_performance_date",
      "index_definition": "CREATE INDEX idx_gateway_cache_performance_date ON public.gateway_cache_performance USING btree (date DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "gateway_usage_logs_pkey",
      "index_definition": "CREATE UNIQUE INDEX gateway_usage_logs_pkey ON public.gateway_usage_logs USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_api_type",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_api_type ON public.gateway_usage_logs USING btree (api_type, created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_client_api",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_client_api ON public.gateway_usage_logs USING btree (client_id, api_type, created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_client_id",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_client_id ON public.gateway_usage_logs USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_conversation_id",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_conversation_id ON public.gateway_usage_logs USING btree (conversation_id)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_created_at",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_created_at ON public.gateway_usage_logs USING btree (created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_model_name",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_model_name ON public.gateway_usage_logs USING btree (model_name)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_provider",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_provider ON public.gateway_usage_logs USING btree (provider)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_was_cached",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_was_cached ON public.gateway_usage_logs USING btree (was_cached)"
    },
    {
      "table_schema": "public",
      "table_name": "gateway_usage_logs",
      "index_name": "idx_gateway_usage_logs_was_fallback",
      "index_definition": "CREATE INDEX idx_gateway_usage_logs_was_fallback ON public.gateway_usage_logs USING btree (was_fallback)"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "index_name": "idx_interactive_flows_active",
      "index_definition": "CREATE INDEX idx_interactive_flows_active ON public.interactive_flows USING btree (client_id, is_active) WHERE (is_active = true)"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "index_name": "idx_interactive_flows_client",
      "index_definition": "CREATE INDEX idx_interactive_flows_client ON public.interactive_flows USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "index_name": "idx_interactive_flows_keywords",
      "index_definition": "CREATE INDEX idx_interactive_flows_keywords ON public.interactive_flows USING gin (trigger_keywords) WHERE (trigger_type = 'keyword'::text)"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "index_name": "idx_interactive_flows_trigger_type",
      "index_definition": "CREATE INDEX idx_interactive_flows_trigger_type ON public.interactive_flows USING btree (client_id, trigger_type, is_active)"
    },
    {
      "table_schema": "public",
      "table_name": "interactive_flows",
      "index_name": "interactive_flows_pkey",
      "index_definition": "CREATE UNIQUE INDEX interactive_flows_pkey ON public.interactive_flows USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "index_name": "idx_templates_client_id",
      "index_definition": "CREATE INDEX idx_templates_client_id ON public.message_templates USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "index_name": "idx_templates_client_status",
      "index_definition": "CREATE INDEX idx_templates_client_status ON public.message_templates USING btree (client_id, status)"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "index_name": "idx_templates_name",
      "index_definition": "CREATE INDEX idx_templates_name ON public.message_templates USING btree (name)"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "index_name": "idx_templates_status",
      "index_definition": "CREATE INDEX idx_templates_status ON public.message_templates USING btree (status)"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "index_name": "message_templates_client_id_name_language_key",
      "index_definition": "CREATE UNIQUE INDEX message_templates_client_id_name_language_key ON public.message_templates USING btree (client_id, name, language)"
    },
    {
      "table_schema": "public",
      "table_name": "message_templates",
      "index_name": "message_templates_pkey",
      "index_definition": "CREATE UNIQUE INDEX message_templates_pkey ON public.message_templates USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_client_id",
      "index_definition": "CREATE INDEX idx_messages_client_id ON public.messages USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_conversation_id",
      "index_definition": "CREATE INDEX idx_messages_conversation_id ON public.messages USING btree (conversation_id)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_direction",
      "index_definition": "CREATE INDEX idx_messages_direction ON public.messages USING btree (direction)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_media_type",
      "index_definition": "CREATE INDEX idx_messages_media_type ON public.messages USING btree (media_type) WHERE (media_type IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_phone",
      "index_definition": "CREATE INDEX idx_messages_phone ON public.messages USING btree (phone)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_timestamp",
      "index_definition": "CREATE INDEX idx_messages_timestamp ON public.messages USING btree (\"timestamp\" DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_transcription",
      "index_definition": "CREATE INDEX idx_messages_transcription ON public.messages USING gin (to_tsvector('portuguese'::regconfig, COALESCE(transcription, ''::text)))"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "idx_messages_wamid",
      "index_definition": "CREATE INDEX idx_messages_wamid ON public.messages USING btree (((metadata ->> 'wamid'::text))) WHERE ((metadata ->> 'wamid'::text) IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "messages",
      "index_name": "messages_pkey",
      "index_definition": "CREATE UNIQUE INDEX messages_pkey ON public.messages USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_client_session_created",
      "index_definition": "CREATE INDEX idx_chat_histories_client_session_created ON public.n8n_chat_histories USING btree (client_id, session_id, created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_created_at",
      "index_definition": "CREATE INDEX idx_chat_histories_created_at ON public.n8n_chat_histories USING btree (created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_session_created",
      "index_definition": "CREATE INDEX idx_chat_histories_session_created ON public.n8n_chat_histories USING btree (session_id, created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_session_id",
      "index_definition": "CREATE INDEX idx_chat_histories_session_id ON public.n8n_chat_histories USING btree (session_id)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_status",
      "index_definition": "CREATE INDEX idx_chat_histories_status ON public.n8n_chat_histories USING btree (status)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_transcription",
      "index_definition": "CREATE INDEX idx_chat_histories_transcription ON public.n8n_chat_histories USING gin (to_tsvector('portuguese'::regconfig, COALESCE(transcription, ''::text)))"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_updated_at",
      "index_definition": "CREATE INDEX idx_chat_histories_updated_at ON public.n8n_chat_histories USING btree (updated_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_chat_histories_wamid",
      "index_definition": "CREATE INDEX idx_chat_histories_wamid ON public.n8n_chat_histories USING btree (wamid) WHERE (wamid IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_media_messages",
      "index_definition": "CREATE INDEX idx_media_messages ON public.n8n_chat_histories USING btree (session_id) WHERE (media_metadata IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_n8n_chat_histories_last_read_at",
      "index_definition": "CREATE INDEX idx_n8n_chat_histories_last_read_at ON public.n8n_chat_histories USING btree (last_read_at)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_n8n_chat_histories_wamid",
      "index_definition": "CREATE INDEX idx_n8n_chat_histories_wamid ON public.n8n_chat_histories USING btree (wamid)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "idx_n8n_chat_histories_wamid_lookup",
      "index_definition": "CREATE INDEX idx_n8n_chat_histories_wamid_lookup ON public.n8n_chat_histories USING btree (wamid) WHERE (wamid IS NOT NULL)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "n8n_chat_histories_client_wamid_unique",
      "index_definition": "CREATE UNIQUE INDEX n8n_chat_histories_client_wamid_unique ON public.n8n_chat_histories USING btree (client_id, wamid)"
    },
    {
      "table_schema": "public",
      "table_name": "n8n_chat_histories",
      "index_name": "n8n_chat_histories_pkey",
      "index_definition": "CREATE UNIQUE INDEX n8n_chat_histories_pkey ON public.n8n_chat_histories USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "index_name": "idx_plan_budgets_plan_name",
      "index_definition": "CREATE INDEX idx_plan_budgets_plan_name ON public.plan_budgets USING btree (plan_name)"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "index_name": "plan_budgets_pkey",
      "index_definition": "CREATE UNIQUE INDEX plan_budgets_pkey ON public.plan_budgets USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "plan_budgets",
      "index_name": "plan_budgets_plan_name_key",
      "index_definition": "CREATE UNIQUE INDEX plan_budgets_plan_name_key ON public.plan_budgets USING btree (plan_name)"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "index_name": "idx_pricing_config_client",
      "index_definition": "CREATE INDEX idx_pricing_config_client ON public.pricing_config USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "index_name": "idx_pricing_config_is_gateway",
      "index_definition": "CREATE INDEX idx_pricing_config_is_gateway ON public.pricing_config USING btree (is_gateway_pricing) WHERE (is_gateway_pricing = true)"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "index_name": "idx_pricing_config_provider_model",
      "index_definition": "CREATE INDEX idx_pricing_config_provider_model ON public.pricing_config USING btree (provider, model)"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "index_name": "pricing_config_client_id_provider_model_key",
      "index_definition": "CREATE UNIQUE INDEX pricing_config_client_id_provider_model_key ON public.pricing_config USING btree (client_id, provider, model)"
    },
    {
      "table_schema": "public",
      "table_name": "pricing_config",
      "index_name": "pricing_config_pkey",
      "index_definition": "CREATE UNIQUE INDEX pricing_config_pkey ON public.pricing_config USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "index_name": "idx_push_tokens_token",
      "index_definition": "CREATE INDEX idx_push_tokens_token ON public.push_tokens USING btree (token)"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "index_name": "idx_push_tokens_user_id",
      "index_definition": "CREATE INDEX idx_push_tokens_user_id ON public.push_tokens USING btree (user_id)"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "index_name": "push_tokens_pkey",
      "index_definition": "CREATE UNIQUE INDEX push_tokens_pkey ON public.push_tokens USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "push_tokens",
      "index_name": "push_tokens_token_key",
      "index_definition": "CREATE UNIQUE INDEX push_tokens_token_key ON public.push_tokens USING btree (token)"
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "index_name": "idx_shared_gateway_config_singleton",
      "index_definition": "CREATE UNIQUE INDEX idx_shared_gateway_config_singleton ON public.shared_gateway_config USING btree ((true))"
    },
    {
      "table_schema": "public",
      "table_name": "shared_gateway_config",
      "index_name": "shared_gateway_config_pkey",
      "index_definition": "CREATE UNIQUE INDEX shared_gateway_config_pkey ON public.shared_gateway_config USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "index_name": "idx_tts_cache_client_hash",
      "index_definition": "CREATE INDEX idx_tts_cache_client_hash ON public.tts_cache USING btree (client_id, text_hash)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "index_name": "idx_tts_cache_expires",
      "index_definition": "CREATE INDEX idx_tts_cache_expires ON public.tts_cache USING btree (expires_at)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "index_name": "idx_tts_cache_hits",
      "index_definition": "CREATE INDEX idx_tts_cache_hits ON public.tts_cache USING btree (hit_count DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "index_name": "tts_cache_client_id_text_hash_key",
      "index_definition": "CREATE UNIQUE INDEX tts_cache_client_id_text_hash_key ON public.tts_cache USING btree (client_id, text_hash)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_cache",
      "index_name": "tts_cache_pkey",
      "index_definition": "CREATE UNIQUE INDEX tts_cache_pkey ON public.tts_cache USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "index_name": "idx_tts_usage_logs_client",
      "index_definition": "CREATE INDEX idx_tts_usage_logs_client ON public.tts_usage_logs USING btree (client_id, created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "index_name": "idx_tts_usage_logs_date",
      "index_definition": "CREATE INDEX idx_tts_usage_logs_date ON public.tts_usage_logs USING btree (created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "index_name": "idx_tts_usage_logs_event",
      "index_definition": "CREATE INDEX idx_tts_usage_logs_event ON public.tts_usage_logs USING btree (event_type)"
    },
    {
      "table_schema": "public",
      "table_name": "tts_usage_logs",
      "index_name": "tts_usage_logs_pkey",
      "index_definition": "CREATE UNIQUE INDEX tts_usage_logs_pkey ON public.tts_usage_logs USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_client_date_source",
      "index_definition": "CREATE INDEX idx_usage_logs_client_date_source ON public.usage_logs USING btree (client_id, created_at DESC, source)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_client_id",
      "index_definition": "CREATE INDEX idx_usage_logs_client_id ON public.usage_logs USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_conversation_id",
      "index_definition": "CREATE INDEX idx_usage_logs_conversation_id ON public.usage_logs USING btree (conversation_id)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_created_at",
      "index_definition": "CREATE INDEX idx_usage_logs_created_at ON public.usage_logs USING btree (created_at DESC)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_model",
      "index_definition": "CREATE INDEX idx_usage_logs_model ON public.usage_logs USING btree (model)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_phone",
      "index_definition": "CREATE INDEX idx_usage_logs_phone ON public.usage_logs USING btree (phone)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "idx_usage_logs_source",
      "index_definition": "CREATE INDEX idx_usage_logs_source ON public.usage_logs USING btree (source)"
    },
    {
      "table_schema": "public",
      "table_name": "usage_logs",
      "index_name": "usage_logs_pkey",
      "index_definition": "CREATE UNIQUE INDEX usage_logs_pkey ON public.usage_logs USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "index_name": "idx_user_invites_client_id",
      "index_definition": "CREATE INDEX idx_user_invites_client_id ON public.user_invites USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "index_name": "idx_user_invites_email",
      "index_definition": "CREATE INDEX idx_user_invites_email ON public.user_invites USING btree (email)"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "index_name": "idx_user_invites_status",
      "index_definition": "CREATE INDEX idx_user_invites_status ON public.user_invites USING btree (status)"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "index_name": "idx_user_invites_token",
      "index_definition": "CREATE INDEX idx_user_invites_token ON public.user_invites USING btree (invite_token)"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "index_name": "user_invites_invite_token_key",
      "index_definition": "CREATE UNIQUE INDEX user_invites_invite_token_key ON public.user_invites USING btree (invite_token)"
    },
    {
      "table_schema": "public",
      "table_name": "user_invites",
      "index_name": "user_invites_pkey",
      "index_definition": "CREATE UNIQUE INDEX user_invites_pkey ON public.user_invites USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "idx_user_profiles_active",
      "index_definition": "CREATE INDEX idx_user_profiles_active ON public.user_profiles USING btree (is_active)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "idx_user_profiles_client",
      "index_definition": "CREATE INDEX idx_user_profiles_client ON public.user_profiles USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "idx_user_profiles_client_id",
      "index_definition": "CREATE INDEX idx_user_profiles_client_id ON public.user_profiles USING btree (client_id)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "idx_user_profiles_client_role",
      "index_definition": "CREATE INDEX idx_user_profiles_client_role ON public.user_profiles USING btree (client_id, role)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "idx_user_profiles_email",
      "index_definition": "CREATE INDEX idx_user_profiles_email ON public.user_profiles USING btree (email)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "idx_user_profiles_role",
      "index_definition": "CREATE INDEX idx_user_profiles_role ON public.user_profiles USING btree (role)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "user_profiles_email_key",
      "index_definition": "CREATE UNIQUE INDEX user_profiles_email_key ON public.user_profiles USING btree (email)"
    },
    {
      "table_schema": "public",
      "table_name": "user_profiles",
      "index_name": "user_profiles_pkey",
      "index_definition": "CREATE UNIQUE INDEX user_profiles_pkey ON public.user_profiles USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "index_name": "idx_webhook_dedup_composite",
      "index_definition": "CREATE INDEX idx_webhook_dedup_composite ON public.webhook_dedup USING btree (client_id, message_id)"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "index_name": "idx_webhook_dedup_key",
      "index_definition": "CREATE INDEX idx_webhook_dedup_key ON public.webhook_dedup USING btree (dedup_key)"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "index_name": "idx_webhook_dedup_processed_at",
      "index_definition": "CREATE INDEX idx_webhook_dedup_processed_at ON public.webhook_dedup USING btree (processed_at)"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "index_name": "webhook_dedup_dedup_key_key",
      "index_definition": "CREATE UNIQUE INDEX webhook_dedup_dedup_key_key ON public.webhook_dedup USING btree (dedup_key)"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "index_name": "webhook_dedup_pkey",
      "index_definition": "CREATE UNIQUE INDEX webhook_dedup_pkey ON public.webhook_dedup USING btree (id)"
    },
    {
      "table_schema": "public",
      "table_name": "webhook_dedup",
      "index_name": "webhook_dedup_unique_key",
      "index_definition": "CREATE UNIQUE INDEX webhook_dedup_unique_key ON public.webhook_dedup USING btree (client_id, message_id)"
    }
  ],
  "migrations_analysis": {
    "tables_in_migrations": [
      "ai_models_registry",
      "audit_logs",
      "bot_configurations",
      "budget_plan_templates",
      "client_budget_limits",
      "client_budgets",
      "clientes_whatsapp_backup",
      "clients",
      "conversations",
      "documents_backup",
      "execution_logs",
      "flow_executions",
      "gateway_cache_performance",
      "gateway_configurations",
      "gateway_usage_logs",
      "interactive_flows",
      "message_templates",
      "messages",
      "n8n_chat_histories_backup",
      "plan_budgets",
      "pricing_config",
      "shared_gateway_config",
      "tts_cache",
      "tts_usage_logs",
      "usage_logs",
      "user_invites",
      "user_profiles",
      "webhook_dedup"
    ],
    "functions_in_migrations": [
      "auth",
      "auto_expire_invites",
      "backfill_operation_type",
      "broadcast_conversation_change",
      "broadcast_message_change",
      "calculate_budget_usage_percentage",
      "calculate_modular_budget_percentages",
      "calculate_next_reset",
      "check_budget_available",
      "cleanup_old_audit_logs",
      "cleanup_old_execution_logs",
      "cleanup_old_webhook_dedup",
      "clientes_whatsapp_view_delete",
      "clientes_whatsapp_view_insert",
      "clientes_whatsapp_view_update",
      "create_client_secret",
      "create_vault_secret",
      "delete_client_secret",
      "get_client_secret",
      "get_conversation_summary",
      "get_current_user_client_id",
      "get_current_user_role",
      "get_daily_usage",
      "get_embedding_dimensions",
      "get_model_pricing",
      "get_monthly_summary",
      "get_usage_by_conversation",
      "get_usage_by_operation_type",
      "get_usage_summary",
      "get_user_client_id",
      "get_vault_secret",
      "get_weekly_evolution",
      "handle_new_user",
      "increment_budget_usage",
      "increment_tts_cache_hit",
      "increment_unified_budget",
      "initialize_client_budget",
      "is_budget_exceeded",
      "is_message_processed",
      "list_vault_secrets",
      "mark_message_processed",
      "match_documents",
      "migrate_execution_logs_to_client",
      "notify_conversation_change",
      "notify_message_change",
      "reset_budget_usage",
      "reset_monthly_budgets",
      "to",
      "trigger_cleanup_old_dedup",
      "update_bot_configurations_updated_at",
      "update_budget_updated_at",
      "update_client_secret",
      "update_client_secret_v2",
      "update_clientes_whatsapp_updated_at",
      "update_gateway_configurations_updated_at",
      "update_interactive_flows_updated_at",
      "update_plan_budgets_updated_at",
      "update_pricing_config_timestamp",
      "update_shared_gateway_config_updated_at",
      "update_updated_at_column",
      "upsert_pricing_config",
      "user_client_id",
      "user_has_role",
      "user_is_admin"
    ],
    "policies_in_migrations": [
      "admins",
      "anyone",
      "client",
      "clients",
      "enable",
      "public",
      "realtime_select_clientes_whatsapp",
      "realtime_select_n8n_chat_histories",
      "service",
      "super",
      "system",
      "to",
      "users"
    ],
    "triggers_in_migrations": [
      "ai_models_registry_updated_at",
      "broadcast_conversation_trigger",
      "broadcast_message_trigger",
      "cleanup_dedup_on_insert",
      "client_budgets_calculate_modular_percentages",
      "client_budgets_calculate_next_reset",
      "client_budgets_calculate_percentage",
      "client_budgets_updated_at",
      "clientes_whatsapp_view_delete_trigger",
      "clientes_whatsapp_view_insert_trigger",
      "clientes_whatsapp_view_update_trigger",
      "conversation_change_trigger",
      "function",
      "gateway_cache_performance_updated_at",
      "gateway_configurations_updated_at",
      "message_change_trigger",
      "on_auth_user_created",
      "plan_budgets_updated_at",
      "pricing_config_updated_at",
      "shared_gateway_config_updated_at",
      "to",
      "trigger_update_bot_configurations_updated_at",
      "trigger_update_budget_plan_templates_timestamp",
      "trigger_update_client_budget_limits_timestamp",
      "trigger_update_clientes_whatsapp_updated_at",
      "update_clients_updated_at",
      "update_interactive_flows_updated_at_trigger",
      "update_templates_updated_at",
      "update_user_invites_updated_at",
      "update_user_profiles_updated_at"
    ],
    "types_in_migrations": [],
    "migration_files": [
      {
        "file": "002_execution_logs.sql",
        "size": 2554,
        "lines": 49
      },
      {
        "file": "003_performance_indexes.sql",
        "size": 2658,
        "lines": 64
      },
      {
        "file": "004_rename_clientes_table.sql",
        "size": 5752,
        "lines": 163
      },
      {
        "file": "005_add_client_id_to_n8n_tables.sql",
        "size": 9621,
        "lines": 267
      },
      {
        "file": "005_fase1_vault_multi_tenant.sql",
        "size": 11734,
        "lines": 353
      },
      {
        "file": "007_add_wamid_to_chat_histories.sql",
        "size": 1233,
        "lines": 34
      },
      {
        "file": "007_auth_setup.sql",
        "size": 5676,
        "lines": 138
      },
      {
        "file": "008_create_first_user.sql",
        "size": 5565,
        "lines": 164
      },
      {
        "file": "008_phase4_admin_roles.sql",
        "size": 10356,
        "lines": 280
      },
      {
        "file": "009_fix_multi_tenant_phone_constraint.sql",
        "size": 5874,
        "lines": 148
      },
      {
        "file": "010_fix_orphaned_users.sql",
        "size": 7571,
        "lines": 229
      },
      {
        "file": "011_analytics_usage_tracking.sql",
        "size": 7211,
        "lines": 218
      },
      {
        "file": "012_pricing_config.sql",
        "size": 7049,
        "lines": 253
      },
      {
        "file": "013_fix_clientes_whatsapp_pkey.sql",
        "size": 4710,
        "lines": 119
      },
      {
        "file": "20250125_check_realtime_status.sql",
        "size": 4013,
        "lines": 122
      },
      {
        "file": "20250125_enable_realtime_replication.sql",
        "size": 5617,
        "lines": 152
      },
      {
        "file": "20250125_fix_realtime_free_tier.sql",
        "size": 4368,
        "lines": 123
      },
      {
        "file": "20250125_realtime_broadcast_clean.sql",
        "size": 3915,
        "lines": 128
      },
      {
        "file": "20250125_realtime_broadcast_triggers.sql",
        "size": 4081,
        "lines": 128
      },
      {
        "file": "20250125_realtime_broadcast_v2.sql",
        "size": 4303,
        "lines": 131
      },
      {
        "file": "20251107_create_bot_configurations.sql",
        "size": 5910,
        "lines": 168
      },
      {
        "file": "20251118_add_meta_app_secret.sql",
        "size": 1164,
        "lines": 28
      },
      {
        "file": "20251118_create_audit_log_vuln008.sql",
        "size": 10047,
        "lines": 276
      },
      {
        "file": "20251118_fix_rls_policies_vuln007.sql",
        "size": 6888,
        "lines": 196
      },
      {
        "file": "20251118_webhook_dedup_fallback_vuln006.sql",
        "size": 9311,
        "lines": 283
      },
      {
        "file": "20251121_create_match_documents_function.sql",
        "size": 3336,
        "lines": 89
      },
      {
        "file": "20251121_fix_audit_logs_multi_tenant.sql",
        "size": 11303,
        "lines": 293
      },
      {
        "file": "20251121_fix_execution_logs_multi_tenant.sql",
        "size": 8492,
        "lines": 230
      },
      {
        "file": "20251121_strict_execution_logs_tenant_isolation.sql",
        "size": 3793,
        "lines": 93
      },
      {
        "file": "20251122162241_create_delete_secret_function.sql",
        "size": 1727,
        "lines": 57
      },
      {
        "file": "20251122231930_add_media_metadata_column.sql",
        "size": 715,
        "lines": 24
      },
      {
        "file": "20251122_add_human_handoff_fields.sql",
        "size": 1217,
        "lines": 29
      },
      {
        "file": "20251122_fix_update_secret_alternative.sql",
        "size": 3588,
        "lines": 116
      },
      {
        "file": "20251122_fix_update_secret_function.sql",
        "size": 2205,
        "lines": 63
      },
      {
        "file": "20251122_normalize_status_values.sql",
        "size": 1482,
        "lines": 41
      },
      {
        "file": "20251125_add_last_read_at_to_n8n_chat_histories.sql",
        "size": 1373,
        "lines": 32
      },
      {
        "file": "20251202_add_updated_at_to_clientes_whatsapp.sql",
        "size": 1835,
        "lines": 51
      },
      {
        "file": "20251203000001_create_knowledge_storage_policies.sql",
        "size": 3591,
        "lines": 89
      },
      {
        "file": "20251203000002_add_original_file_metadata.sql",
        "size": 4051,
        "lines": 102
      },
      {
        "file": "20251204115356_add_original_file_columns_to_documents.sql",
        "size": 1133,
        "lines": 21
      },
      {
        "file": "20251204_add_audio_preferences.sql",
        "size": 777,
        "lines": 14
      },
      {
        "file": "20251204_add_audio_to_messages.sql",
        "size": 1098,
        "lines": 26
      },
      {
        "file": "20251204_add_original_file_fields_to_match_documents.sql",
        "size": 1492,
        "lines": 56
      },
      {
        "file": "20251204_add_tts_config.sql",
        "size": 1072,
        "lines": 17
      },
      {
        "file": "20251204_add_tts_model.sql",
        "size": 408,
        "lines": 9
      },
      {
        "file": "20251204_create_tts_cache.sql",
        "size": 1618,
        "lines": 39
      },
      {
        "file": "20251204_create_tts_usage_logs.sql",
        "size": 2069,
        "lines": 55
      },
      {
        "file": "20251206_add_fluxo_inicial_status.sql",
        "size": 1771,
        "lines": 46
      },
      {
        "file": "20251206_create_interactive_flows.sql",
        "size": 11660,
        "lines": 296
      },
      {
        "file": "20251207_update_conversations_status.sql",
        "size": 878,
        "lines": 22
      },
      {
        "file": "20251207_update_messages_type.sql",
        "size": 759,
        "lines": 21
      },
      {
        "file": "20251208_create_message_templates.sql",
        "size": 6914,
        "lines": 198
      },
      {
        "file": "20251212_create_budget_tables.sql",
        "size": 9959,
        "lines": 297
      },
      {
        "file": "20251212_create_gateway_infrastructure.sql",
        "size": 12030,
        "lines": 328
      },
      {
        "file": "20251212_modify_existing_tables.sql",
        "size": 3497,
        "lines": 70
      },
      {
        "file": "20251212_seed_ai_models_registry.sql",
        "size": 7495,
        "lines": 267
      },
      {
        "file": "20251212_simplify_to_shared_gateway_config.sql",
        "size": 5122,
        "lines": 140
      },
      {
        "file": "20251213133305_add_vault_rpc_functions.sql",
        "size": 2975,
        "lines": 107
      },
      {
        "file": "20251213_budget_plan_templates.sql",
        "size": 16340,
        "lines": 539
      },
      {
        "file": "20251213_unified_api_tracking.sql",
        "size": 1812,
        "lines": 37
      },
      {
        "file": "20251214_modular_budget_system.sql",
        "size": 13392,
        "lines": 371
      },
      {
        "file": "20251215_add_ai_keys_mode_to_clients.sql",
        "size": 969,
        "lines": 31
      },
      {
        "file": "20251215_fix_gateway_usage_logs_api_type_add_tts.sql",
        "size": 991,
        "lines": 28
      },
      {
        "file": "20251215_fix_message_templates.sql",
        "size": 8994,
        "lines": 238
      },
      {
        "file": "20251216134414_fix_fast_track_node_enabled.sql",
        "size": 4201,
        "lines": 84
      },
      {
        "file": "20251231_fix_duplicate_messages.sql",
        "size": 6446,
        "lines": 198
      },
      {
        "file": "20251231_fix_gateway_errors.sql",
        "size": 4711,
        "lines": 143
      },
      {
        "file": "20260104130721_add_message_status.sql",
        "size": 1733,
        "lines": 31
      },
      {
        "file": "ADD_operation_type_helpers.sql",
        "size": 6297,
        "lines": 176
      },
      {
        "file": "DISABLE_trigger.sql",
        "size": 1178,
        "lines": 35
      },
      {
        "file": "FIX_pricing_and_analytics.sql",
        "size": 4121,
        "lines": 128
      },
      {
        "file": "RLS.sql",
        "size": 17876,
        "lines": 459
      },
      {
        "file": "check-ai-gateway-config.sql",
        "size": 4117,
        "lines": 75
      },
      {
        "file": "check-fast-track-anywhere.sql",
        "size": 4132,
        "lines": 57
      },
      {
        "file": "debug-client-mismatch.sql",
        "size": 4874,
        "lines": 101
      },
      {
        "file": "debug-fast-track.sql",
        "size": 11824,
        "lines": 221
      },
      {
        "file": "debug-gateway-config.sql",
        "size": 5486,
        "lines": 176
      },
      {
        "file": "debug-gateway-final.sql",
        "size": 4730,
        "lines": 76
      },
      {
        "file": "debug-gateway-flow.sql",
        "size": 3548,
        "lines": 61
      },
      {
        "file": "debug-getBotConfigs.sql",
        "size": 6921,
        "lines": 162
      },
      {
        "file": "debug-step-by-step.sql",
        "size": 6985,
        "lines": 124
      },
      {
        "file": "diagnostic-fast-track.sql",
        "size": 7622,
        "lines": 139
      },
      {
        "file": "fix-fast-track-complete.sql",
        "size": 11335,
        "lines": 269
      },
      {
        "file": "fix-router-model.sql",
        "size": 441,
        "lines": 14
      },
      {
        "file": "migration.sql",
        "size": 8204,
        "lines": 223
      },
      {
        "file": "setup-gateway-keys-ready.sql",
        "size": 2567,
        "lines": 82
      },
      {
        "file": "setup-gateway-keys.sql",
        "size": 3321,
        "lines": 110
      },
      {
        "file": "verify-gateway-tables.sql",
        "size": 2327,
        "lines": 78
      },
      {
        "file": "verify-vault-rpc-functions.sql",
        "size": 3032,
        "lines": 91
      }
    ]
  },
  "comparison": {
    "tables": {
      "in_both": [
        "ai_models_registry",
        "audit_logs",
        "bot_configurations",
        "client_budgets",
        "clients",
        "conversations",
        "execution_logs",
        "flow_executions",
        "gateway_cache_performance",
        "gateway_usage_logs",
        "interactive_flows",
        "message_templates",
        "messages",
        "plan_budgets",
        "pricing_config",
        "shared_gateway_config",
        "tts_cache",
        "tts_usage_logs",
        "usage_logs",
        "user_invites",
        "user_profiles",
        "webhook_dedup"
      ],
      "missing_in_database": [
        "budget_plan_templates",
        "client_budget_limits",
        "clientes_whatsapp_backup",
        "documents_backup",
        "gateway_configurations",
        "n8n_chat_histories_backup"
      ],
      "missing_in_migrations": [
        "Clientes WhatsApp_backup",
        "audit_logs_backup_poker_system",
        "clientes_whatsapp",
        "documents",
        "n8n_chat_histories",
        "push_tokens"
      ],
      "total_in_db": 28,
      "total_in_migrations": 28
    },
    "functions": {
      "missing_in_database": [
        "auth",
        "clientes_whatsapp_view_delete",
        "get_embedding_dimensions",
        "initialize_client_budget",
        "notify_conversation_change",
        "notify_message_change",
        "reset_monthly_budgets",
        "to",
        "update_budget_updated_at",
        "update_client_secret_v2"
      ],
      "missing_in_migrations": [
        "array_to_halfvec",
        "array_to_halfvec",
        "array_to_halfvec",
        "array_to_halfvec",
        "array_to_sparsevec",
        "array_to_sparsevec",
        "array_to_sparsevec",
        "array_to_sparsevec",
        "array_to_vector",
        "array_to_vector",
        "array_to_vector",
        "array_to_vector",
        "binary_quantize",
        "binary_quantize",
        "cosine_distance",
        "cosine_distance",
        "cosine_distance",
        "get_user_tenant_id",
        "gin_extract_query_trgm",
        "gin_extract_value_trgm",
        "gin_trgm_consistent",
        "gin_trgm_triconsistent",
        "gtrgm_compress",
        "gtrgm_consistent",
        "gtrgm_decompress",
        "gtrgm_distance",
        "gtrgm_in",
        "gtrgm_options",
        "gtrgm_out",
        "gtrgm_penalty",
        "gtrgm_picksplit",
        "gtrgm_same",
        "gtrgm_union",
        "halfvec",
        "halfvec_accum",
        "halfvec_add",
        "halfvec_avg",
        "halfvec_cmp",
        "halfvec_combine",
        "halfvec_concat",
        "halfvec_eq",
        "halfvec_ge",
        "halfvec_gt",
        "halfvec_in",
        "halfvec_l2_squared_distance",
        "halfvec_le",
        "halfvec_lt",
        "halfvec_mul",
        "halfvec_ne",
        "halfvec_negative_inner_product",
        "halfvec_out",
        "halfvec_recv",
        "halfvec_send",
        "halfvec_spherical_distance",
        "halfvec_sub",
        "halfvec_to_float4",
        "halfvec_to_sparsevec",
        "halfvec_to_vector",
        "halfvec_typmod_in",
        "hamming_distance",
        "hnsw_bit_support",
        "hnsw_halfvec_support",
        "hnsw_sparsevec_support",
        "hnswhandler",
        "inner_product",
        "inner_product",
        "inner_product",
        "ivfflat_bit_support",
        "ivfflat_halfvec_support",
        "ivfflathandler",
        "jaccard_distance",
        "l1_distance",
        "l1_distance",
        "l1_distance",
        "l2_distance",
        "l2_distance",
        "l2_distance",
        "l2_norm",
        "l2_norm",
        "l2_normalize",
        "l2_normalize",
        "l2_normalize",
        "set_limit",
        "show_limit",
        "show_trgm",
        "similarity",
        "similarity_dist",
        "similarity_op",
        "sparsevec",
        "sparsevec_cmp",
        "sparsevec_eq",
        "sparsevec_ge",
        "sparsevec_gt",
        "sparsevec_in",
        "sparsevec_l2_squared_distance",
        "sparsevec_le",
        "sparsevec_lt",
        "sparsevec_ne",
        "sparsevec_negative_inner_product",
        "sparsevec_out",
        "sparsevec_recv",
        "sparsevec_send",
        "sparsevec_to_halfvec",
        "sparsevec_to_vector",
        "sparsevec_typmod_in",
        "strict_word_similarity",
        "strict_word_similarity_commutator_op",
        "strict_word_similarity_dist_commutator_op",
        "strict_word_similarity_dist_op",
        "strict_word_similarity_op",
        "subvector",
        "subvector",
        "try_acquire_webhook_lock",
        "upsert_customer_safe",
        "vector",
        "vector_accum",
        "vector_add",
        "vector_avg",
        "vector_cmp",
        "vector_combine",
        "vector_concat",
        "vector_dims",
        "vector_dims",
        "vector_eq",
        "vector_ge",
        "vector_gt",
        "vector_in",
        "vector_l2_squared_distance",
        "vector_le",
        "vector_lt",
        "vector_mul",
        "vector_ne",
        "vector_negative_inner_product",
        "vector_norm",
        "vector_out",
        "vector_recv",
        "vector_send",
        "vector_spherical_distance",
        "vector_sub",
        "vector_to_float4",
        "vector_to_halfvec",
        "vector_to_sparsevec",
        "vector_typmod_in",
        "word_similarity",
        "word_similarity_commutator_op",
        "word_similarity_dist_commutator_op",
        "word_similarity_dist_op",
        "word_similarity_op"
      ],
      "total_in_db": 202,
      "total_in_migrations": 64
    },
    "migration_files_count": 89
  }
}